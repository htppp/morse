<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CW略語・Q符号学習 - モールス練習アプリ v4</title>
  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();class b{constructor(e={frequency:750,volume:.7,wpm:20}){this.audioContext=null,this.currentOscillator=null,this.currentGain=null,this.isPlaying=!1,this.settings=e,this.init()}ensureAudioContext(){this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext.state==="suspended"&&this.audioContext.resume()}init(){const e=()=>{this.ensureAudioContext()};document.addEventListener("click",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0})}updateSettings(e){this.settings={...this.settings,...e}}scheduleTone(e,t){if(this.ensureAudioContext(),!!this.audioContext)try{const n=this.audioContext.createOscillator(),s=this.audioContext.createGain();n.connect(s),s.connect(this.audioContext.destination),n.frequency.value=this.settings.frequency,n.type="sine";const i=this.audioContext.currentTime,r=Math.max(i,e);s.gain.setValueAtTime(0,r),s.gain.linearRampToValueAtTime(this.settings.volume,r+.001),s.gain.setValueAtTime(this.settings.volume,r+(t-1)/1e3),s.gain.linearRampToValueAtTime(0,r+t/1e3),n.start(r),n.stop(r+t/1e3)}catch(n){console.error("音声エラー:",n)}}startContinuousTone(){if(this.ensureAudioContext(),!!this.audioContext)try{this.stopContinuousTone();const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.connect(t),t.connect(this.audioContext.destination),e.frequency.value=this.settings.frequency,e.type="sine";const n=this.audioContext.currentTime;t.gain.setValueAtTime(0,n),t.gain.linearRampToValueAtTime(this.settings.volume,n+.001),e.start(n),this.currentOscillator=e,this.currentGain=t}catch(e){console.error("連続音開始エラー:",e)}}stopContinuousTone(){if(this.audioContext)try{if(this.currentOscillator&&this.currentGain){const e=this.audioContext.currentTime;this.currentGain.gain.cancelScheduledValues(e),this.currentGain.gain.setValueAtTime(this.currentGain.gain.value,e),this.currentGain.gain.linearRampToValueAtTime(0,e+.001),this.currentOscillator.stop(e+.002),this.currentOscillator=null,this.currentGain=null}}catch(e){console.error("連続音停止エラー:",e)}}async playMorseString(e){if(this.isPlaying||!e||(this.ensureAudioContext(),!this.audioContext))return!1;this.isPlaying=!0;const n=1200/(this.settings.wpm||20),s=n,i=3*n,r=n,a=3*n,d=7*n;let o=this.audioContext.currentTime+.02;for(let l=0;l<e.length&&this.isPlaying;l++){const h=e[l];h==="."?(this.scheduleTone(o,s),o+=(s+r)/1e3):h==="-"?(this.scheduleTone(o,i),o+=(i+r)/1e3):h===" "?o+=(a-r)/1e3:h==="/"&&(o+=(d-r)/1e3)}const g=(o-this.audioContext.currentTime)*1e3;await new Promise(l=>setTimeout(l,g));const p=this.isPlaying;return this.isPlaying=!1,p}stopPlaying(){this.isPlaying=!1}getAudioContext(){return this.audioContext}}const u={A:".-",B:"-...",C:"-.-.",D:"-..",E:".",F:"..-.",G:"--.",H:"....",I:"..",J:".---",K:"-.-",L:".-..",M:"--",N:"-.",O:"---",P:".--.",Q:"--.-",R:".-.",S:"...",T:"-",U:"..-",V:"...-",W:".--",X:"-..-",Y:"-.--",Z:"--..",0:"-----",1:".----",2:"..---",3:"...--",4:"....-",5:".....",6:"-....",7:"--...",8:"---..",9:"----."," ":"/",".":".-.-.-",",":"--..--",":":"---...","?":"..--..",_:"..--.-","+":".-.-.","-":"-....-","×":"-..-","^":"......","/":"-..-.","@":".--.-.","(":"-.--.",")":"-.--.-",'"':".-..-.","'":".----.","=":"-...-"},f=Object.fromEntries(Object.entries(u).map(([c,e])=>[e,c]));class v{static textToMorse(e){const t=e.toUpperCase();return Array.from(t).map(n=>u[n]||n).join(" ")}static morseSequencesToText(e){let t="";for(const n of e)n==="/"?t+=" ":n&&n!==""&&(t+=f[n]||"?");return t}static getMorseMap(){return u}static charToMorse(e){return u[e.toUpperCase()]}}class m{constructor(){this.entries=[],this.filteredEntries=[],this.selectedTags=new Set,this.selectedFrequencies=new Set([5]),this.displayMode="card",this.viewMode="browse",this.sortColumn="abbreviation",this.sortDirection="asc",this.currentCards=[],this.currentIndex=0,this.isFlipped=!1,this.progress={known:new Set,unknown:new Set},this.reviewMode=!1,this.currentlyPlaying=null,this.audioSystem=new b,this.loadProgress(),this.loadFilters(),this.loadData()}async loadData(){try{const e=await fetch("./flashcard.tsv");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.text();this.entries=t.trim().split(`
`).slice(1).map(n=>{const[s,i,r,a,d,o,g]=n.split("	");return{tags:s,frequency:parseInt(i),abbreviation:r,english:a,japanese:d,description:o||"",example:g||""}}),this.applyFilters(),this.render()}catch(e){console.error("データ読み込みエラー:",e),this.renderError()}}getAllTags(){const e=new Set;return this.entries.forEach(t=>{t.tags.split(",").forEach(n=>e.add(n.trim()))}),Array.from(e).sort()}applyFilters(){let e=this.entries;this.selectedTags.size>0&&(e=e.filter(t=>{const n=t.tags.split(",").map(s=>s.trim());return Array.from(this.selectedTags).some(s=>n.includes(s))})),e=e.filter(t=>this.selectedFrequencies.has(t.frequency)),this.filteredEntries=this.sortEntries(e)}sortEntries(e){const t=[...e];return t.sort((n,s)=>{let i=0;switch(this.sortColumn){case"abbreviation":i=n.abbreviation.localeCompare(s.abbreviation);break;case"english":i=n.english.localeCompare(s.english);break;case"japanese":i=n.japanese.localeCompare(s.japanese);break;case"frequency":i=n.frequency-s.frequency;break;case"tags":i=n.tags.localeCompare(s.tags);break}return this.sortDirection==="asc"?i:-i}),t}toggleSort(e){this.sortColumn===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.applyFilters(),this.render()}toggleTag(e){this.selectedTags.has(e)?this.selectedTags.delete(e):this.selectedTags.add(e),this.applyFilters(),this.saveFilters(),this.render()}toggleFrequency(e){this.selectedFrequencies.has(e)?this.selectedFrequencies.delete(e):this.selectedFrequencies.add(e),this.applyFilters(),this.saveFilters(),this.render()}toggleDisplayMode(){this.displayMode=this.displayMode==="card"?"list":"card",this.render()}getFrequencyStars(e){return"★".repeat(e)+"☆".repeat(5-e)}formatAbbreviation(e){const t=e.match(/^\[([A-Z]+)\]$/);return t?`<span class="prosign">${t[1]}</span>`:e}getCardCountText(){const e=this.filteredEntries.length,t=this.filteredEntries.filter(s=>this.progress.unknown.has(s.abbreviation)).length,n=this.filteredEntries.filter(s=>this.progress.known.has(s.abbreviation)).length;return`全${e}件 / わかる:${n}件 / わからない:${t}件`}shuffleCards(e){const t=[...e];for(let n=t.length-1;n>0;n--){const s=Math.floor(Math.random()*(n+1));[t[n],t[s]]=[t[s],t[n]]}return t}startLearning(){this.reviewMode?this.currentCards=this.filteredEntries.filter(e=>this.progress.unknown.has(e.abbreviation)):this.currentCards=this.shuffleCards(this.filteredEntries),this.currentIndex=0,this.isFlipped=!1,this.viewMode="learn",this.render()}flipCard(){this.isFlipped=!this.isFlipped,this.render()}nextCard(){this.currentIndex<this.currentCards.length-1&&(this.currentIndex++,this.isFlipped=!1,this.render())}previousCard(){this.currentIndex>0&&(this.currentIndex--,this.isFlipped=!1,this.render())}markAsKnown(){const e=this.currentCards[this.currentIndex];this.progress.known.add(e.abbreviation),this.progress.unknown.delete(e.abbreviation),this.saveProgress(),this.currentIndex<this.currentCards.length-1&&(this.currentIndex++,this.isFlipped=!1),this.render()}markAsUnknown(){const e=this.currentCards[this.currentIndex];this.progress.unknown.add(e.abbreviation),this.progress.known.delete(e.abbreviation),this.saveProgress(),this.currentIndex<this.currentCards.length-1&&(this.currentIndex++,this.isFlipped=!1),this.render()}backToBrowse(){this.viewMode="browse",this.render()}async playMorse(e){try{if(this.currentlyPlaying===e){this.audioSystem.stopPlaying(),this.currentlyPlaying=null,this.render();return}this.currentlyPlaying&&this.audioSystem.stopPlaying(),this.currentlyPlaying=e,this.render();const t=v.textToMorse(e);t&&await this.audioSystem.playMorseString(t),this.currentlyPlaying=null,this.render()}catch(t){console.error("モールス再生エラー:",t),this.currentlyPlaying=null,this.render()}}render(){this.viewMode==="browse"?this.renderBrowseMode():this.renderLearnMode()}renderBrowseMode(){const e=document.getElementById("app");if(!e)return;const t=this.getAllTags();e.innerHTML=`
			<div class="container">
				<header class="header">
					<button id="backBtn" class="back-btn">← 戻る</button>
					<h1>CW略語・Q符号</h1>
				</header>

				<div class="filter-section">
					<div class="filter-group">
						<h2>タグでフィルター</h2>
						<div class="tags-list">
							${t.map(s=>`
								<button class="tag-btn ${this.selectedTags.has(s)?"active":""}" data-tag="${s}">
									${s}
								</button>
							`).join("")}
						</div>
					</div>

					<div class="filter-group">
						<h2>使用頻度</h2>
						<div class="frequency-list">
							${[5,4,3,2,1].map(s=>`
								<label class="frequency-checkbox">
									<input type="checkbox" value="${s}" ${this.selectedFrequencies.has(s)?"checked":""}>
									<span>${this.getFrequencyStars(s)}</span>
								</label>
							`).join("")}
						</div>
					</div>

					<div class="filter-group">
						<h2>モード</h2>
						<label class="mode-checkbox">
							<input type="checkbox" id="review-mode-checkbox" ${this.reviewMode?"checked":""}>
							<span>復習モード（わからないカードのみ）</span>
						</label>
					</div>

					<div class="result-count">
						${this.getCardCountText()}
					</div>

					<div class="action-buttons">
						<button id="start-learning-btn" class="primary-button">学習開始</button>
						<button id="clear-progress-btn" class="secondary-button">進捗をリセット</button>
					</div>
				</div>

				<div class="entries-container" id="entriesContainer"></div>
			</div>
		`;const n=document.getElementById("backBtn");n&&n.addEventListener("click",()=>{window.location.href="./index.html"}),this.renderEntries(),this.attachBrowseModeListeners()}renderEntries(){const e=document.getElementById("entriesContainer");if(!e)return;this.displayMode==="card"?this.renderCardView(e):this.renderListView(e);const t=document.getElementById("toggleModeBtn");t&&t.addEventListener("click",()=>this.toggleDisplayMode())}renderCardView(e){e.innerHTML=`
			<div class="entries-header">
				<h2>略語一覧（${this.filteredEntries.length}件）</h2>
				<button id="toggleModeBtn" class="toggle-mode-btn" title="表示モード切り替え">
					📋 リスト表示
				</button>
			</div>
			<div class="entries-list">
				${this.filteredEntries.map(t=>`
					<div class="entry-card">
						<div class="entry-header">
							<div class="entry-abbr">${this.formatAbbreviation(t.abbreviation)}</div>
							<div class="entry-frequency" title="使用頻度: ${t.frequency}/5">${this.getFrequencyStars(t.frequency)}</div>
						</div>
						<div class="entry-english">${t.english}</div>
						<div class="entry-japanese">${t.japanese}</div>
						${t.description?`<div class="entry-description">${t.description}</div>`:""}
						${t.example?`<div class="entry-example">例: ${t.example}</div>`:""}
						<div class="entry-tags">${t.tags}</div>
					</div>
				`).join("")}
			</div>
		`}getSortIndicator(e){return this.sortColumn!==e?"":this.sortDirection==="asc"?" ▲":" ▼"}renderListView(e){e.innerHTML=`
			<div class="entries-header">
				<h2>略語一覧（${this.filteredEntries.length}件）</h2>
				<button id="toggleModeBtn" class="toggle-mode-btn" title="表示モード切り替え">
					🃏 カード表示
				</button>
			</div>
			<div class="list-table-container">
				<table class="list-table">
					<thead>
						<tr>
							<th class="sortable" data-column="abbreviation">略語${this.getSortIndicator("abbreviation")}</th>
							<th class="sortable" data-column="english">英文${this.getSortIndicator("english")}</th>
							<th class="sortable" data-column="japanese">和訳${this.getSortIndicator("japanese")}</th>
							<th class="sortable" data-column="frequency">頻度${this.getSortIndicator("frequency")}</th>
							<th class="sortable" data-column="tags">タグ${this.getSortIndicator("tags")}</th>
						</tr>
					</thead>
					<tbody>
						${this.filteredEntries.map(s=>`
							<tr>
								<td class="list-abbr">
									<button class="abbr-play-btn ${this.currentlyPlaying===s.abbreviation?"playing":""}" data-abbr="${s.abbreviation}">
										${this.formatAbbreviation(s.abbreviation)}
									</button>
								</td>
								<td class="list-english">${s.english}</td>
								<td class="list-japanese">${s.japanese}</td>
								<td class="list-frequency" title="使用頻度: ${s.frequency}/5">${this.getFrequencyStars(s.frequency)}</td>
								<td class="list-tags">${s.tags}</td>
							</tr>
						`).join("")}
					</tbody>
				</table>
			</div>
		`,e.querySelectorAll("th.sortable").forEach(s=>{s.addEventListener("click",()=>{const i=s.getAttribute("data-column");i&&this.toggleSort(i)})}),e.querySelectorAll(".abbr-play-btn").forEach(s=>{s.addEventListener("click",()=>{const i=s.getAttribute("data-abbr");i&&this.playMorse(i)})})}renderLearnMode(){const e=document.getElementById("app");if(!e)return;if(this.currentCards.length===0){e.innerHTML=`
				<div class="container">
					<div class="no-cards">
						${this.reviewMode?"復習するカードがありません":"学習するカードがありません"}
					</div>
					<button id="back-to-browse-btn" class="secondary-button">設定に戻る</button>
				</div>
			`;const i=document.getElementById("back-to-browse-btn");i&&i.addEventListener("click",()=>this.backToBrowse());return}const t=this.currentCards[this.currentIndex],n=this.currentIndex+1,s=this.currentCards.length;e.innerHTML=`
			<div class="container learning-view">
				<div class="learning-header">
					<button id="back-to-browse-btn" class="back-btn">← 設定に戻る</button>
					<div class="progress-indicator">${n} / ${s}</div>
				</div>

				<div class="card-container">
					<div class="flashcard ${this.isFlipped?"flipped":""}" id="flashcard">
						<div class="card-front">
							<div class="card-label">略語</div>
							<div class="card-content">${this.formatAbbreviation(t.abbreviation)}</div>
							<button class="play-morse-btn" id="play-morse-btn" title="モールス符号を再生">🔊 モールス再生</button>
						</div>
						<div class="card-back">
							<div class="card-label">意味</div>
							<div class="card-content-abbr">${this.formatAbbreviation(t.abbreviation)}</div>
							<div class="card-content-text">${t.english}</div>
							<div class="card-content-text">${t.japanese}</div>
							${t.description?`<div class="card-description">${t.description}</div>`:""}
							${t.example?`<div class="card-example">例: ${t.example}</div>`:""}
							<div class="card-tags">${t.tags} / ${this.getFrequencyStars(t.frequency)}</div>
						</div>
					</div>
				</div>

				<div class="card-controls">
					<button id="flip-card-btn" class="control-button">
						${this.isFlipped?"問題に戻る":"正解を確認する"} (Space)
					</button>
				</div>

				${this.isFlipped?this.renderJudgmentButtons(t):""}

				<div class="navigation-controls">
					<button id="prev-card-btn" class="nav-button" ${this.currentIndex===0?"disabled":""}>
						← 前のカード
					</button>
					<button id="next-card-btn" class="nav-button" ${this.currentIndex>=this.currentCards.length-1?"disabled":""}>
						次のカード →
					</button>
				</div>
			</div>
		`,this.attachLearnModeListeners()}renderJudgmentButtons(e){const t=this.progress.known.has(e.abbreviation);return`
			<div class="judgment-controls">
				<button id="mark-unknown-btn" class="judgment-button unknown ${this.progress.unknown.has(e.abbreviation)?"active":""}">
					× わからない
				</button>
				<button id="mark-known-btn" class="judgment-button known ${t?"active":""}">
					○ わかる
				</button>
			</div>
		`}attachBrowseModeListeners(){document.querySelectorAll(".tag-btn").forEach(r=>{r.addEventListener("click",()=>{const a=r.getAttribute("data-tag");a&&this.toggleTag(a)})}),document.querySelectorAll(".frequency-checkbox input").forEach(r=>{r.addEventListener("change",a=>{const d=parseInt(a.target.value,10);this.toggleFrequency(d)})});const n=document.getElementById("review-mode-checkbox");n&&n.addEventListener("change",()=>{this.reviewMode=n.checked});const s=document.getElementById("start-learning-btn");s&&s.addEventListener("click",()=>this.startLearning());const i=document.getElementById("clear-progress-btn");i&&i.addEventListener("click",()=>{confirm("学習進捗をすべてリセットしますか？")&&(this.progress={known:new Set,unknown:new Set},this.saveProgress(),this.render())})}attachLearnModeListeners(){const e=document.getElementById("back-to-browse-btn");e&&e.addEventListener("click",()=>this.backToBrowse());const t=document.getElementById("flip-card-btn");t&&t.addEventListener("click",()=>this.flipCard());const n=document.getElementById("play-morse-btn");n&&n.addEventListener("click",()=>{const r=this.currentCards[this.currentIndex];this.playMorse(r.abbreviation)});const s=document.getElementById("prev-card-btn"),i=document.getElementById("next-card-btn");if(s&&s.addEventListener("click",()=>this.previousCard()),i&&i.addEventListener("click",()=>this.nextCard()),this.isFlipped){const r=document.getElementById("mark-known-btn"),a=document.getElementById("mark-unknown-btn");r&&r.addEventListener("click",()=>this.markAsKnown()),a&&a.addEventListener("click",()=>this.markAsUnknown())}this.attachKeyboardListeners()}attachKeyboardListeners(){const e=t=>{this.viewMode==="learn"&&(t.key===" "||t.key==="Spacebar"?(t.preventDefault(),this.flipCard()):t.key==="ArrowRight"?(t.preventDefault(),this.nextCard()):t.key==="ArrowLeft"&&(t.preventDefault(),this.previousCard()))};document.removeEventListener("keydown",e),document.addEventListener("keydown",e)}saveFilters(){try{const e={tags:Array.from(this.selectedTags),frequencies:Array.from(this.selectedFrequencies)};localStorage.setItem("v4.flashcard.filters",JSON.stringify(e))}catch(e){console.error("フィルタ保存エラー:",e)}}loadFilters(){try{const e=localStorage.getItem("v4.flashcard.filters");if(e){const t=JSON.parse(e);this.selectedTags=new Set(Array.isArray(t.tags)?t.tags:[]),this.selectedFrequencies=new Set(Array.isArray(t.frequencies)?t.frequencies:[5])}}catch(e){console.error("フィルタ読み込みエラー:",e)}}saveProgress(){try{const e={known:Array.from(this.progress.known),unknown:Array.from(this.progress.unknown)};localStorage.setItem("v4.flashcard.progress",JSON.stringify(e))}catch(e){console.error("進捗保存エラー:",e)}}loadProgress(){try{const e=localStorage.getItem("v4.flashcard.progress");if(e){const t=JSON.parse(e);this.progress={known:new Set(t.known||[]),unknown:new Set(t.unknown||[])}}}catch(e){console.error("進捗読み込みエラー:",e)}}renderError(){const e=document.getElementById("app");e&&(e.innerHTML=`
			<div class="container">
				<header class="header">
					<button onclick="window.location.href='./index.html'" class="back-btn">← 戻る</button>
					<h1>CW略語・Q符号</h1>
				</header>
				<div class="error">
					データの読み込みに失敗しました。flashcard.tsvを確認してください。
				</div>
			</div>
		`)}}document.addEventListener("DOMContentLoaded",()=>{new m});</script>
  <style rel="stylesheet" crossorigin>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:20px}.prosign{text-decoration:overline}.container{max-width:1200px;margin:0 auto}.header{display:flex;align-items:center;gap:20px;margin-bottom:30px;color:#fff}.back-btn{background:#fff3;border:none;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;font-size:1rem;transition:background .3s}.back-btn:hover{background:#ffffff4d}.header h1{font-size:2rem;flex:1}.mode-toggle{margin-left:auto}.toggle-mode-btn{background:linear-gradient(135deg,#667eea,#764ba2);border:none;color:#fff;padding:8px 16px;border-radius:8px;cursor:pointer;font-size:.9rem;transition:transform .2s,box-shadow .2s;white-space:nowrap}.toggle-mode-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.tags-container{background:#fff;border-radius:12px;padding:20px;margin-bottom:20px}.tags-container h2{font-size:1.2rem;color:#667eea;margin-bottom:15px}.tags-list{display:flex;flex-wrap:wrap;gap:10px}.tag-btn{background:#f0f0f0;border:2px solid transparent;color:#667eea;padding:8px 16px;border-radius:20px;cursor:pointer;font-size:.9rem;transition:all .3s}.tag-btn:hover{background:#e0e0e0}.tag-btn.active{background:#667eea;color:#fff;border-color:#667eea}.entries-container{background:#fff;border-radius:12px;padding:20px}.entries-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.entries-header h2{font-size:1.2rem;color:#667eea;margin:0}.entries-container h2{font-size:1.2rem;color:#667eea;margin-bottom:15px}.entries-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px}.entry-card{background:#f9f9f9;border-radius:8px;padding:15px;transition:transform .2s,box-shadow .2s}.entry-card:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.entry-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.entry-abbr{font-size:1.3rem;font-weight:700;color:#667eea}.entry-frequency{font-size:1rem;color:orange;-webkit-user-select:none;user-select:none}.entry-english{font-size:.95rem;color:#666;margin-bottom:5px}.entry-japanese{font-size:1rem;color:#333;margin-bottom:10px}.entry-description{font-size:.9rem;color:#666;margin-bottom:8px;line-height:1.5}.entry-example{font-size:.85rem;color:#888;margin-bottom:10px;font-style:italic;padding-left:10px;border-left:3px solid #ddd}.entry-tags{font-size:.85rem;color:#999;font-style:italic}.error{background:#fff;border-radius:12px;padding:40px;text-align:center;color:#d32f2f;font-size:1.1rem}.list-table-container{overflow-x:auto}.list-table{width:100%;border-collapse:collapse;background:#fff}.list-table thead{background:#667eea;color:#fff}.list-table th{padding:12px;text-align:left;font-weight:600;white-space:nowrap}.list-table th.sortable{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background .2s}.list-table th.sortable:hover{background:#5568d3}.list-table tbody tr{border-bottom:1px solid #e0e0e0;transition:background .2s}.list-table tbody tr:hover{background:#f5f5f5}.list-table td{padding:10px 12px}.list-frequency{color:orange;font-size:.9rem;white-space:nowrap;text-align:center;-webkit-user-select:none;user-select:none}.list-abbr{white-space:nowrap}.abbr-play-btn{background:linear-gradient(135deg,#667eea,#764ba2);border:none;color:#fff;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.9rem;font-weight:700;transition:transform .2s,box-shadow .2s;white-space:nowrap}.abbr-play-btn:hover{transform:translateY(-2px);box-shadow:0 4px 8px #667eea4d}.abbr-play-btn.playing{background:linear-gradient(135deg,#f44336,#e91e63);animation:pulse 1s infinite}@keyframes pulse{0%,to{opacity:1}50%{opacity:.7}}.abbr-play-btn .prosign{text-decoration:overline}.list-english{color:#666;min-width:150px}.list-japanese{color:#333;min-width:150px}.list-tags{color:#999;font-size:.85rem;font-style:italic}.filter-section{background:#fff;border-radius:12px;padding:20px;margin-bottom:20px}.filter-group{margin-bottom:20px}.filter-group h2{font-size:1.1rem;color:#667eea;margin-bottom:10px}.frequency-list{display:flex;flex-wrap:wrap;gap:10px}.frequency-checkbox{display:flex;align-items:center;gap:5px;cursor:pointer}.frequency-checkbox input{cursor:pointer}.mode-checkbox{display:flex;align-items:center;gap:8px;cursor:pointer}.mode-checkbox input{cursor:pointer}.result-count{font-size:1rem;color:#667eea;margin:15px 0;font-weight:600}.action-buttons{display:flex;gap:10px;margin-top:15px}.primary-button{background:#667eea;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:1rem;cursor:pointer;transition:background .3s}.primary-button:hover{background:#5568d3}.secondary-button{background:#f0f0f0;color:#333;border:none;padding:12px 24px;border-radius:8px;font-size:1rem;cursor:pointer;transition:background .3s}.secondary-button:hover{background:#e0e0e0}.learning-view{max-width:800px}.learning-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.progress-indicator{font-size:1.2rem;color:#fff;font-weight:600}.no-cards{background:#fff;border-radius:12px;padding:60px;text-align:center;font-size:1.2rem;color:#666;margin-bottom:20px}.card-container{perspective:1000px;margin-bottom:30px}.flashcard{position:relative;width:100%;min-height:400px;transition:transform .6s;transform-style:preserve-3d}.flashcard.flipped{transform:rotateY(180deg)}.card-front,.card-back{position:absolute;width:100%;min-height:400px;backface-visibility:hidden;background:#fff;border-radius:12px;padding:40px;display:flex;flex-direction:column;justify-content:center;align-items:center;box-shadow:0 4px 20px #0000001a}.card-back{transform:rotateY(180deg)}.card-label{font-size:1rem;color:#999;margin-bottom:20px;text-transform:uppercase;letter-spacing:1px}.card-content{font-size:3rem;font-weight:700;color:#667eea;margin-bottom:30px;text-align:center}.card-content-abbr{font-size:2rem;font-weight:700;color:#667eea;margin-bottom:15px}.card-content-text{font-size:1.3rem;color:#333;margin-bottom:10px;text-align:center}.card-description{font-size:1rem;color:#666;margin-top:15px;margin-bottom:10px;text-align:center;line-height:1.6;max-width:90%}.card-example{font-size:.95rem;color:#888;margin-top:10px;margin-bottom:10px;text-align:center;font-style:italic;padding:10px;background:#f9f9f9;border-radius:6px;max-width:90%}.card-tags{font-size:.9rem;color:#999;margin-top:20px}.play-morse-btn{background:#764ba2;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:1rem;cursor:pointer;transition:background .3s}.play-morse-btn:hover{background:#5f3d84}.card-controls{text-align:center;margin-bottom:20px}.control-button{background:#667eea;color:#fff;border:none;padding:15px 40px;border-radius:8px;font-size:1.1rem;cursor:pointer;transition:background .3s}.control-button:hover{background:#5568d3}.judgment-controls{display:flex;justify-content:center;gap:20px;margin-bottom:20px}.judgment-button{border:2px solid transparent;padding:15px 40px;border-radius:8px;font-size:1.1rem;cursor:pointer;transition:all .3s}.judgment-button.known{background:#f0f0f0;color:#4caf50}.judgment-button.known:hover{background:#e8f5e9}.judgment-button.known.active{background:#4caf50;color:#fff;border-color:#4caf50}.judgment-button.unknown{background:#f0f0f0;color:#f44336}.judgment-button.unknown:hover{background:#ffebee}.judgment-button.unknown.active{background:#f44336;color:#fff;border-color:#f44336}.navigation-controls{display:flex;justify-content:space-between;gap:20px}.nav-button{background:#fff3;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:1rem;cursor:pointer;transition:background .3s}.nav-button:hover:not(:disabled){background:#ffffff4d}.nav-button:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.header h1{font-size:1.5rem}.entries-list{grid-template-columns:1fr}.toggle-mode-btn{font-size:.9rem;padding:8px 12px}.list-table{font-size:.9rem}.list-table th,.list-table td{padding:8px}.card-content{font-size:2rem}.card-content-abbr{font-size:1.5rem}.card-content-text{font-size:1.1rem}.judgment-controls,.navigation-controls{flex-direction:column}}</style>
</head>
<body>
  <div id="app"></div>
</body>
</html>
