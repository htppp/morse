<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>横振り電鍵練習 - モールス練習アプリ v4</title>
  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();class v{constructor(e={frequency:750,volume:.7,wpm:20}){this.audioContext=null,this.currentOscillator=null,this.currentGain=null,this.isPlaying=!1,this.settings=e,this.init()}ensureAudioContext(){this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext.state==="suspended"&&this.audioContext.resume()}init(){const e=()=>{this.ensureAudioContext()};document.addEventListener("click",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0})}updateSettings(e){this.settings={...this.settings,...e}}scheduleTone(e,t){if(this.ensureAudioContext(),!!this.audioContext)try{const i=this.audioContext.createOscillator(),s=this.audioContext.createGain();i.connect(s),s.connect(this.audioContext.destination),i.frequency.value=this.settings.frequency,i.type="sine";const o=this.audioContext.currentTime,a=Math.max(o,e);s.gain.setValueAtTime(0,a),s.gain.linearRampToValueAtTime(this.settings.volume,a+.001),s.gain.setValueAtTime(this.settings.volume,a+(t-1)/1e3),s.gain.linearRampToValueAtTime(0,a+t/1e3),i.start(a),i.stop(a+t/1e3)}catch(i){console.error("音声エラー:",i)}}startContinuousTone(){if(this.ensureAudioContext(),!!this.audioContext)try{this.stopContinuousTone();const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.connect(t),t.connect(this.audioContext.destination),e.frequency.value=this.settings.frequency,e.type="sine";const i=this.audioContext.currentTime;t.gain.setValueAtTime(0,i),t.gain.linearRampToValueAtTime(this.settings.volume,i+.001),e.start(i),this.currentOscillator=e,this.currentGain=t}catch(e){console.error("連続音開始エラー:",e)}}stopContinuousTone(){if(this.audioContext)try{if(this.currentOscillator&&this.currentGain){const e=this.audioContext.currentTime;this.currentGain.gain.cancelScheduledValues(e),this.currentGain.gain.setValueAtTime(this.currentGain.gain.value,e),this.currentGain.gain.linearRampToValueAtTime(0,e+.001),this.currentOscillator.stop(e+.002),this.currentOscillator=null,this.currentGain=null}}catch(e){console.error("連続音停止エラー:",e)}}async playMorseString(e){if(this.isPlaying||!e||(this.ensureAudioContext(),!this.audioContext))return!1;this.isPlaying=!0;const i=1200/(this.settings.wpm||20),s=i,o=3*i,a=i,n=3*i,m=7*i;let l=this.audioContext.currentTime+.02;for(let u=0;u<e.length&&this.isPlaying;u++){const f=e[u];f==="."?(this.scheduleTone(l,s),l+=(s+a)/1e3):f==="-"?(this.scheduleTone(l,o),l+=(o+a)/1e3):f===" "?l+=(n-a)/1e3:f==="/"&&(l+=(m-a)/1e3)}const c=(l-this.audioContext.currentTime)*1e3;await new Promise(u=>setTimeout(u,c));const p=this.isPlaying;return this.isPlaying=!1,p}stopPlaying(){this.isPlaying=!1}getAudioContext(){return this.audioContext}}const g={A:".-",B:"-...",C:"-.-.",D:"-..",E:".",F:"..-.",G:"--.",H:"....",I:"..",J:".---",K:"-.-",L:".-..",M:"--",N:"-.",O:"---",P:".--.",Q:"--.-",R:".-.",S:"...",T:"-",U:"..-",V:"...-",W:".--",X:"-..-",Y:"-.--",Z:"--..",0:"-----",1:".----",2:"..---",3:"...--",4:"....-",5:".....",6:"-....",7:"--...",8:"---..",9:"----."," ":"/",".":".-.-.-",",":"--..--",":":"---...","?":"..--..",_:"..--.-","+":".-.-.","-":"-....-","×":"-..-","^":"......","/":"-..-.","@":".--.-.","(":"-.--.",")":"-.--.-",'"':".-..-.","'":".----.","=":"-...-"},y=Object.fromEntries(Object.entries(g).map(([r,e])=>[e,r]));class w{static textToMorse(e){const t=e.toUpperCase();return Array.from(t).map(i=>g[i]||i).join(" ")}static morseSequencesToText(e){let t="";for(const i of e)i==="/"?t+=" ":i&&i!==""&&(t+=y[i]||"?");return t}static getMorseMap(){return g}static charToMorse(e){return g[e.toUpperCase()]}}const h=class h{static get(e){return this.settings[e]}static set(e,t){this.settings[e]=t,this.save()}static load(){try{const e=localStorage.getItem("v4.settings");e&&(this.settings={...this.defaultSettings,...JSON.parse(e)})}catch(e){console.error("Failed to load settings:",e)}}static save(){try{localStorage.setItem("v4.settings",JSON.stringify(this.settings))}catch(e){console.error("Failed to save settings:",e)}}static getAll(){return{...this.settings}}};h.defaultSettings={volume:.7,frequency:750,wpm:20,iambicMode:"B",paddleLayout:"normal"},h.settings={...h.defaultSettings};let d=h;class L{constructor(){this.leftDown=!1,this.rightDown=!1,this.buffer="",this.sequence="",this.sending=!1,this.lastSent=null,this.charTimer=null,this.wordTimer=null,this.forceNextElement=null,this.isSqueezing=!1,this.squeezeOccurred=!1,this.squeezeDetected=!1,d.load();const e=d.getAll();this.audioSystem=new v({frequency:e.frequency,volume:e.volume,wpm:e.wpm}),this.render(),this.setupEventListeners(),this.setupSettingsModal(),this.updatePaddleLayout()}getTimings(){const e=1200/d.get("wpm");return{dot:e,dash:e*3,charGap:e*4,wordGap:e*7}}clearTimers(){this.charTimer!==null&&(clearTimeout(this.charTimer),this.charTimer=null),this.wordTimer!==null&&(clearTimeout(this.wordTimer),this.wordTimer=null)}setTimers(){this.clearTimers();const e=this.getTimings();this.charTimer=window.setTimeout(()=>{this.sequence&&(this.buffer+=this.sequence+" ",this.sequence="",this.updateDisplay())},e.charGap),this.wordTimer=window.setTimeout(()=>{this.sequence&&(this.buffer+=this.sequence+" ",this.sequence=""),this.buffer.endsWith("/ ")||(this.buffer+="/ "),this.updateDisplay()},e.wordGap)}sendPaddleElement(e){if(this.sending)return;this.sending=!0,this.clearTimers(),this.leftDown&&this.rightDown||(this.squeezeDetected=!1);const t=1200/d.get("wpm"),i=e==="."?t:t*3;this.audioSystem.scheduleTone(0,i),this.sequence+=e,this.updateDisplay(),this.lastSent=e,setTimeout(()=>{const s=d.get("iambicMode"),o=this.leftDown&&this.rightDown;s==="B"&&this.squeezeDetected&&!this.forceNextElement&&(e==="."?this.forceNextElement="-":e==="-"&&(this.forceNextElement=".")),o&&!this.forceNextElement&&(e==="."?this.forceNextElement="-":e==="-"&&(this.forceNextElement="."))},i-5),setTimeout(()=>{if(this.sending=!1,!this.leftDown){const s=document.getElementById("paddleLeft");s&&s.classList.remove("active")}if(!this.rightDown){const s=document.getElementById("paddleRight");s&&s.classList.remove("active")}this.updateSqueezeIndicator(),this.forceNextElement?this.scheduleNext():this.leftDown||this.rightDown?this.scheduleNext():this.setTimers()},i+t)}scheduleNext(){const t=d.get("paddleLayout")==="reversed";if(this.forceNextElement){const i=this.forceNextElement;this.forceNextElement=null,this.sendPaddleElement(i)}else if(this.leftDown&&this.rightDown){const i=this.lastSent==="."?"-":".";this.sendPaddleElement(i)}else if(this.leftDown){const i=t?"-":".";this.sendPaddleElement(i)}else if(this.rightDown){const i=t?".":"-";this.sendPaddleElement(i)}}updateSqueezeIndicator(){const e=this.leftDown&&this.rightDown;this.isSqueezing=e;const t=document.getElementById("squeezeIndicator");t&&(e?(t.classList.add("active"),this.squeezeOccurred=!0):t.classList.remove("active"))}onLeftDown(){const e=d.get("iambicMode");this.leftDown=!0;const t=document.getElementById("paddleLeft");if(t&&t.classList.add("active"),this.updateSqueezeIndicator(),e==="B"&&this.sending&&this.rightDown){const i=d.get("paddleLayout");this.forceNextElement=i==="reversed"?"-":".",this.squeezeDetected=!0}if(!this.sending){const s=d.get("paddleLayout")==="reversed"?"-":".";this.sendPaddleElement(s)}}onRightDown(){const e=d.get("iambicMode");this.rightDown=!0;const t=document.getElementById("paddleRight");if(t&&t.classList.add("active"),this.updateSqueezeIndicator(),e==="B"&&this.sending&&this.leftDown){const i=d.get("paddleLayout");this.forceNextElement=i==="reversed"?".":"-",this.squeezeDetected=!0}if(!this.sending){const s=d.get("paddleLayout")==="reversed"?".":"-";this.sendPaddleElement(s)}}onLeftUp(){this.leftDown=!1;const e=document.getElementById("paddleLeft");e&&e.classList.remove("active"),this.updateSqueezeIndicator(),d.get("iambicMode")==="B"&&this.isSqueezing&&this.rightDown&&!this.sending&&setTimeout(()=>{if(this.rightDown&&!this.sending){const s=d.get("paddleLayout")==="reversed"?".":"-";this.sendPaddleElement(s)}},10)}onRightUp(){this.rightDown=!1;const e=document.getElementById("paddleRight");e&&e.classList.remove("active"),this.updateSqueezeIndicator(),d.get("iambicMode")==="B"&&this.isSqueezing&&this.leftDown&&!this.sending&&setTimeout(()=>{if(this.leftDown&&!this.sending){const s=d.get("paddleLayout")==="reversed"?"-":".";this.sendPaddleElement(s)}},10),!this.leftDown&&!this.rightDown&&this.squeezeOccurred&&(this.squeezeOccurred=!1)}updateDisplay(){let e="";this.buffer&&(e=this.buffer.trim()),this.sequence&&(e&&(e+=" "),e+=`[${this.sequence}]`);const t=document.getElementById("morseDisplay");t&&(t.textContent=e||"入力されたモールス信号"),this.updateDecoded()}updateDecoded(){const e=this.buffer.trim().split(/\s+/),t=w.morseSequencesToText(e),i=document.getElementById("decodedOutput");i&&(i.textContent=t||"解読された文字")}clear(){this.buffer="",this.sequence="",this.clearTimers(),this.updateDisplay()}updatePaddleLayout(){const e=document.getElementById("paddleLeft"),t=document.getElementById("paddleRight");if(!e||!t)return;d.get("paddleLayout")==="reversed"?(e.innerHTML='<div class="paddle-label">左<br>（長点）</div>',t.innerHTML='<div class="paddle-label">右<br>（短点）</div>'):(e.innerHTML='<div class="paddle-label">左<br>（短点）</div>',t.innerHTML='<div class="paddle-label">右<br>（長点）</div>')}setupEventListeners(){let e=!1,t=!1;const i=document.getElementById("paddleLeft");i&&(i.addEventListener("mousedown",n=>{n.preventDefault(),e||(e=!0,this.onLeftDown())}),i.addEventListener("mouseup",n=>{n.preventDefault(),e&&(e=!1,this.onLeftUp())}),i.addEventListener("touchstart",n=>{n.preventDefault(),e||(e=!0,this.onLeftDown())}),i.addEventListener("touchend",n=>{n.preventDefault(),e&&(e=!1,this.onLeftUp())}));const s=document.getElementById("paddleRight");s&&(s.addEventListener("mousedown",n=>{n.preventDefault(),t||(t=!0,this.onRightDown())}),s.addEventListener("mouseup",n=>{n.preventDefault(),t&&(t=!1,this.onRightUp())}),s.addEventListener("touchstart",n=>{n.preventDefault(),t||(t=!0,this.onRightDown())}),s.addEventListener("touchend",n=>{n.preventDefault(),t&&(t=!1,this.onRightUp())})),document.addEventListener("mouseup",()=>{e&&(e=!1,this.onLeftUp()),t&&(t=!1,this.onRightUp())});const o=document.getElementById("clearBtn");o&&o.addEventListener("click",()=>this.clear());const a=document.getElementById("backBtn");a&&a.addEventListener("click",()=>{window.location.href="./index.html"}),document.addEventListener("keydown",n=>{n.target.tagName==="INPUT"||n.target.tagName==="TEXTAREA"||n.repeat||(n.key==="ArrowLeft"||n.key==="z"||n.key==="Z"?(n.preventDefault(),this.onLeftDown()):(n.key==="ArrowRight"||n.key==="x"||n.key==="X")&&(n.preventDefault(),this.onRightDown()))}),document.addEventListener("keyup",n=>{n.target.tagName==="INPUT"||n.target.tagName==="TEXTAREA"||(n.key==="ArrowLeft"||n.key==="z"||n.key==="Z"?(n.preventDefault(),this.onLeftUp()):(n.key==="ArrowRight"||n.key==="x"||n.key==="X")&&(n.preventDefault(),this.onRightUp()))})}setupSettingsModal(){const e=document.getElementById("settingsIcon"),t=document.getElementById("settingsModal"),i=document.getElementById("settingsCancel"),s=document.getElementById("settingsOK");e&&t&&e.addEventListener("click",()=>{this.openSettingsModal()}),i&&t&&i.addEventListener("click",()=>{t.classList.remove("active")}),s&&t&&s.addEventListener("click",()=>{this.applySettings(),t.classList.remove("active")}),t&&t.addEventListener("click",o=>{o.target===t&&t.classList.remove("active")})}openSettingsModal(){const e=d.getAll(),t=document.getElementById("volumeRange"),i=document.getElementById("volumeInput"),s=document.getElementById("frequencyInput"),o=document.getElementById("wpmInput"),a=document.getElementById("iambicMode"),n=document.getElementById("paddleLayout");t&&(t.value=String(e.volume*100)),i&&(i.value=String(Math.round(e.volume*100))),s&&(s.value=String(e.frequency)),o&&(o.value=String(e.wpm)),a&&(a.checked=e.iambicMode==="B"),n&&(n.checked=e.paddleLayout==="reversed");const m=document.getElementById("settingsModal");if(m&&m.classList.add("active"),t&&i&&(t.oninput=l=>{const c=l.target.value;i.value=c},i.oninput=l=>{const c=l.target.value;t.value=c}),a){const l=()=>{const c=document.getElementById("iambicModeStatus");c&&(c.textContent=a.checked?"(現在: Iambic B)":"(現在: Iambic A)")};l(),a.onchange=l}if(n){const l=()=>{const c=document.getElementById("paddleLayoutStatus");c&&(c.textContent=n.checked?"(現在: 左:長点 / 右:短点)":"(現在: 左:短点 / 右:長点)")};l(),n.onchange=l}}applySettings(){const e=document.getElementById("volumeInput"),t=document.getElementById("frequencyInput"),i=document.getElementById("wpmInput"),s=document.getElementById("iambicMode"),o=document.getElementById("paddleLayout");e&&d.set("volume",parseInt(e.value)/100),t&&d.set("frequency",parseInt(t.value)),i&&d.set("wpm",parseInt(i.value)),s&&d.set("iambicMode",s.checked?"B":"A"),o&&d.set("paddleLayout",o.checked?"reversed":"normal");const a=d.getAll();this.audioSystem.updateSettings({volume:a.volume,frequency:a.frequency,wpm:a.wpm}),this.updatePaddleLayout()}render(){const e=document.getElementById("app");if(!e)return;const t=d.getAll();e.innerHTML=`
      <div class="settings-icon" id="settingsIcon">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
        </svg>
      </div>

      <div class="settings-modal" id="settingsModal">
        <div class="settings-content">
          <div class="settings-header">
            <h2>設定</h2>
          </div>
          <div class="settings-grid">
            <div class="setting-item">
              <label>音量</label>
              <div class="setting-row">
                <input type="range" id="volumeRange" min="0" max="100" value="${t.volume*100}">
                <input type="number" id="volumeInput" min="0" max="100" value="${Math.round(t.volume*100)}">
                <span>%</span>
              </div>
            </div>
            <div class="setting-item">
              <label>周波数 (Hz)</label>
              <div class="setting-row">
                <input type="number" id="frequencyInput" min="100" max="2000" value="${t.frequency}" step="50">
              </div>
            </div>
            <div class="setting-item">
              <label>WPM (速度)</label>
              <div class="setting-row">
                <input type="number" id="wpmInput" min="1" max="999" value="${t.wpm}">
              </div>
            </div>
            <div class="setting-item">
              <label>Iambic A/B モード <span id="iambicModeStatus">(現在: Iambic ${t.iambicMode})</span></label>
              <div class="setting-row">
                <div class="toggle-switch">
                  <input type="checkbox" id="iambicMode" class="toggle-input" ${t.iambicMode==="B"?"checked":""}>
                  <label for="iambicMode" class="toggle-label">
                    <span class="toggle-switch-handle"></span>
                  </label>
                </div>
              </div>
            </div>
            <div class="setting-item">
              <label>パドル配置 <span id="paddleLayoutStatus">(現在: ${t.paddleLayout==="reversed"?"左:長点 / 右:短点":"左:短点 / 右:長点"})</span></label>
              <div class="setting-row">
                <div class="toggle-switch">
                  <input type="checkbox" id="paddleLayout" class="toggle-input" ${t.paddleLayout==="reversed"?"checked":""}>
                  <label for="paddleLayout" class="toggle-label">
                    <span class="toggle-switch-handle"></span>
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="settings-buttons">
            <button id="settingsCancel" class="btn btn-secondary">キャンセル</button>
            <button id="settingsOK" class="btn">OK</button>
          </div>
        </div>
      </div>

      <div class="container">
        <header class="header">
          <button id="backBtn" class="back-btn">← 戻る</button>
          <h1>横振り電鍵練習</h1>
        </header>

        <div class="paddle-container">
          <div id="paddleLeft" class="paddle left">
            <div class="paddle-label">左<br>（短点）</div>
          </div>
          <div class="paddle-divider"></div>
          <div id="paddleRight" class="paddle right">
            <div class="paddle-label">右<br>（長点）</div>
          </div>
        </div>

        <div class="squeeze-indicator" id="squeezeIndicator">
          ⚡squeeze⚡
        </div>

        <div class="output-container">
          <div class="output-section">
            <h2>モールス信号</h2>
            <div id="morseDisplay" class="output-display">入力されたモールス信号</div>
          </div>

          <div class="output-section">
            <h2>解読された文字</h2>
            <div id="decodedOutput" class="output-display">解読された文字</div>
          </div>
        </div>

        <div class="controls">
          <button id="clearBtn" class="btn">クリア</button>
        </div>

        <div class="instructions">
          <h3>使い方</h3>
          <ul>
            <li>左パドル（または←キー、Zキー）: デフォルトで短点「・」</li>
            <li>右パドル（または→キー、Xキー）: デフォルトで長点「−」</li>
            <li>両パドル同時押し（squeeze）で自動交互送信</li>
            <li>Iambic B モード: スクイーズ後も自動送信継続</li>
            <li>画面右上の設定からパドル配置を反転可能</li>
          </ul>
        </div>
      </div>
    `}}document.addEventListener("DOMContentLoaded",()=>{new L});</script>
  <style rel="stylesheet" crossorigin>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:20px}.container{max-width:800px;margin:0 auto}.header{display:flex;align-items:center;gap:20px;margin-bottom:30px;color:#fff}.back-btn{background:#fff3;border:none;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;font-size:1rem;transition:background .3s}.back-btn:hover{background:#ffffff4d}.header h1{font-size:2rem}.paddle-container{display:flex;justify-content:center;align-items:center;margin-bottom:40px;gap:10px}.paddle{width:150px;height:200px;background:linear-gradient(145deg,#fff,#e6e6e6);border-radius:12px;display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none;box-shadow:0 10px 30px #0000004d;transition:transform .1s,box-shadow .1s;touch-action:none}.paddle.left{border-top-right-radius:4px;border-bottom-right-radius:4px}.paddle.right{border-top-left-radius:4px;border-bottom-left-radius:4px}.paddle:active{transform:scale(.95);box-shadow:0 5px 15px #0000004d;background:linear-gradient(145deg,#e6e6e6,#ccc)}.paddle-label{font-size:1.2rem;font-weight:700;color:#667eea;text-align:center}.paddle-divider{width:4px;height:180px;background:#ffffff4d;border-radius:2px}.output-container{background:#fff;border-radius:12px;padding:20px;margin-bottom:20px}.output-section{margin-bottom:20px}.output-section:last-child{margin-bottom:0}.output-section h2{font-size:1.2rem;color:#667eea;margin-bottom:10px}.output-display{background:#f5f5f5;border-radius:8px;padding:15px;min-height:60px;font-family:Courier New,monospace;font-size:1.1rem;color:#333;word-wrap:break-word}.controls{display:flex;justify-content:center;gap:10px;margin-bottom:30px}.btn{background:#fff;border:none;color:#667eea;padding:12px 30px;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:600;transition:background .3s,transform .1s}.btn:hover{background:#f0f0f0}.btn:active{transform:scale(.98)}.instructions{background:#ffffff1a;border-radius:12px;padding:20px;color:#fff}.instructions h3{margin-bottom:15px;font-size:1.2rem}.instructions ul{list-style:none;padding:0}.instructions li{margin-bottom:10px;padding-left:20px;position:relative}.instructions li:before{content:"•";position:absolute;left:0}@media (max-width: 768px){.header h1{font-size:1.5rem}.paddle{width:120px;height:160px}.paddle-label{font-size:1rem}.paddle-divider{height:140px}}z-index: 100; transition: all .3s ease; } .settings-icon:hover{transform:rotate(90deg) scale(1.1)}.settings-icon svg{width:28px;height:28px;fill:#667eea}.settings-modal{display:none;position:fixed;inset:0;background:#00000080;z-index:200;align-items:center;justify-content:center;padding:20px}.settings-modal.active{display:flex}.settings-content{background:#fff;border-radius:20px;padding:30px;max-width:500px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d}.settings-header{margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #e0e0e0}.settings-header h2{font-size:1.5rem;color:#333}.settings-grid{display:grid;gap:20px}.setting-item{display:flex;flex-direction:column;gap:10px}.setting-item label{font-weight:600;color:#555;font-size:1rem}.setting-row{display:flex;align-items:center;gap:10px}.setting-row input[type=range]{flex:1}.setting-row input[type=number]{width:80px;padding:8px;border:2px solid #ddd;border-radius:6px;font-size:1rem;text-align:center}.setting-row input[type=number]:focus{outline:none;border-color:#667eea}.settings-buttons{display:flex;justify-content:center;gap:15px;margin-top:25px}.btn-secondary{background:linear-gradient(135deg,#888,#666);color:#fff}@media (max-width: 768px){.header h1{font-size:1.5rem}.morse-key{width:150px;height:150px}.key-label{font-size:1.2rem}}.squeeze-indicator{text-align:center;margin:20px 0;font-size:1.2rem;font-weight:700;color:#ff6b00;opacity:0;transition:opacity .2s;background:#fff3;padding:10px;border-radius:8px}.squeeze-indicator.active{opacity:1}.paddle.active{transform:scale(.95);box-shadow:0 5px 15px #0000004d;background:linear-gradient(145deg,#e6e6e6,#ccc)}.toggle-switch{position:relative;display:inline-block;width:60px;height:30px}.toggle-input{opacity:0;width:0;height:0;position:absolute}.toggle-label{position:absolute;cursor:pointer;inset:0;background:linear-gradient(135deg,#e0e0e0,#f5f5f5);border:2px solid #ddd;border-radius:30px;transition:all .3s ease;box-shadow:inset 0 2px 4px #0000001a,0 2px 8px #0000001a}.toggle-label:hover{border-color:#667eea;box-shadow:inset 0 2px 4px #0000001a,0 2px 12px #667eea33}.toggle-switch-handle{position:absolute;content:"";height:22px;width:22px;left:2px;top:2px;background:linear-gradient(135deg,#fff,#f8f8f8);border-radius:50%;transition:all .3s ease;box-shadow:0 2px 6px #0003,0 1px 3px #0000001a}.toggle-input:checked+.toggle-label{background:linear-gradient(135deg,#667eea,#764ba2);border-color:#667eea;box-shadow:inset 0 2px 4px #0000001a,0 2px 12px #667eea66}.toggle-input:checked+.toggle-label .toggle-switch-handle{transform:translate(30px);background:linear-gradient(135deg,#fff,#f0f8ff);box-shadow:0 2px 8px #0000004d,0 1px 4px #0003}.toggle-input:focus+.toggle-label{outline:2px solid #667eea;outline-offset:2px}.toggle-label:active .toggle-switch-handle{width:26px}.toggle-input:checked+.toggle-label:active .toggle-switch-handle{transform:translate(26px)}</style>
</head>
<body>
  <div id="app"></div>
</body>
</html>
