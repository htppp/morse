<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CW略語・Q符号学習 - モールス練習アプリ v4</title>
  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function s(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(t){if(t.ep)return;t.ep=!0;const i=s(t);fetch(t.href,i)}})();class c{constructor(){this.entries=[],this.filteredEntries=[],this.selectedTags=new Set,this.loadData()}async loadData(){try{const s=await(await fetch("../../../flashcard.tsv")).text();this.entries=s.trim().split(`
`).slice(1).map(r=>{const[t,i,n,d,o]=r.split("	");return{tags:t,frequency:parseInt(i),abbreviation:n,english:d,japanese:o}}),this.filteredEntries=[...this.entries],this.render()}catch(e){console.error("データ読み込みエラー:",e),this.renderError()}}getAllTags(){const e=new Set;return this.entries.forEach(s=>{s.tags.split(",").forEach(r=>e.add(r.trim()))}),Array.from(e).sort()}filterByTags(){this.selectedTags.size===0?this.filteredEntries=[...this.entries]:this.filteredEntries=this.entries.filter(e=>{const s=e.tags.split(",").map(r=>r.trim());return Array.from(this.selectedTags).some(r=>s.includes(r))}),this.renderEntries()}toggleTag(e){this.selectedTags.has(e)?this.selectedTags.delete(e):this.selectedTags.add(e),this.filterByTags(),this.renderTags()}render(){const e=document.getElementById("app");if(!e)return;e.innerHTML=`
      <div class="container">
        <header class="header">
          <button id="backBtn" class="back-btn">← 戻る</button>
          <h1>CW略語・Q符号</h1>
        </header>

        <div class="tags-container" id="tagsContainer"></div>

        <div class="entries-container" id="entriesContainer"></div>
      </div>
    `;const s=document.getElementById("backBtn");s&&s.addEventListener("click",()=>{window.location.href="./index.html"}),this.renderTags(),this.renderEntries()}renderTags(){const e=document.getElementById("tagsContainer");if(!e)return;const s=this.getAllTags();e.innerHTML=`
      <h2>タグでフィルター</h2>
      <div class="tags-list">
        ${s.map(r=>`
          <button class="tag-btn ${this.selectedTags.has(r)?"active":""}" data-tag="${r}">
            ${r}
          </button>
        `).join("")}
      </div>
    `,e.querySelectorAll(".tag-btn").forEach(r=>{r.addEventListener("click",()=>{const t=r.getAttribute("data-tag");t&&this.toggleTag(t)})})}renderEntries(){const e=document.getElementById("entriesContainer");e&&(e.innerHTML=`
      <h2>略語一覧（${this.filteredEntries.length}件）</h2>
      <div class="entries-list">
        ${this.filteredEntries.map(s=>`
          <div class="entry-card">
            <div class="entry-abbr">${s.abbreviation}</div>
            <div class="entry-english">${s.english}</div>
            <div class="entry-japanese">${s.japanese}</div>
            <div class="entry-tags">${s.tags}</div>
          </div>
        `).join("")}
      </div>
    `)}renderError(){const e=document.getElementById("app");e&&(e.innerHTML=`
      <div class="container">
        <header class="header">
          <button onclick="window.location.href='./index.html'" class="back-btn">← 戻る</button>
          <h1>CW略語・Q符号</h1>
        </header>
        <div class="error">
          データの読み込みに失敗しました。flashcard.tsvを確認してください。
        </div>
      </div>
    `)}}document.addEventListener("DOMContentLoaded",()=>{new c});</script>
  <style rel="stylesheet" crossorigin>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:20px}.container{max-width:1200px;margin:0 auto}.header{display:flex;align-items:center;gap:20px;margin-bottom:30px;color:#fff}.back-btn{background:#fff3;border:none;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;font-size:1rem;transition:background .3s}.back-btn:hover{background:#ffffff4d}.header h1{font-size:2rem}.tags-container{background:#fff;border-radius:12px;padding:20px;margin-bottom:20px}.tags-container h2{font-size:1.2rem;color:#667eea;margin-bottom:15px}.tags-list{display:flex;flex-wrap:wrap;gap:10px}.tag-btn{background:#f0f0f0;border:2px solid transparent;color:#667eea;padding:8px 16px;border-radius:20px;cursor:pointer;font-size:.9rem;transition:all .3s}.tag-btn:hover{background:#e0e0e0}.tag-btn.active{background:#667eea;color:#fff;border-color:#667eea}.entries-container{background:#fff;border-radius:12px;padding:20px}.entries-container h2{font-size:1.2rem;color:#667eea;margin-bottom:15px}.entries-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px}.entry-card{background:#f9f9f9;border-radius:8px;padding:15px;transition:transform .2s,box-shadow .2s}.entry-card:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.entry-abbr{font-size:1.3rem;font-weight:700;color:#667eea;margin-bottom:8px}.entry-english{font-size:.95rem;color:#666;margin-bottom:5px}.entry-japanese{font-size:1rem;color:#333;margin-bottom:10px}.entry-tags{font-size:.85rem;color:#999;font-style:italic}.error{background:#fff;border-radius:12px;padding:40px;text-align:center;color:#d32f2f;font-size:1.1rem}@media (max-width: 768px){.header h1{font-size:1.5rem}.entries-list{grid-template-columns:1fr}}</style>
</head>
<body>
  <div id="app"></div>
</body>
</html>
