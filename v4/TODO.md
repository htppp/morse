# モールス練習アプリ v4 - TODO・課題リスト

## 🐛 既知の問題

### 横振り電鍵（horizontal.html）
- **v2との動作乖離**: 現在の実装がv2と乖離しているため、動作が異なる
  - 詳細調査が必要
  - v2の挙動を再確認し、完全な互換性を確保する必要がある

### CW略語・Q符号学習（flashcard.html）
- **簡易実装**: v3に比べると簡易実装のため、完全実装が必要
  - 現在実装されている機能:
    - flashcard.tsvデータ読み込み
    - タグベースフィルタリング
    - カード表示（略語・英文・和訳・タグ）
    - 使用頻度の星表示（★☆）
    - 表示モード切り替え（カード/リスト）
  - 未実装の機能:
    - フラッシュカード学習モード（カードめくり）
    - 試験モード（ランダム出題）
    - 正答率記録・統計表示
    - LocalStorage統合

## 📋 実装予定

### 優先度: 高

#### 1. 横振り電鍵のv2互換性確保
- [ ] v2の実装と現在の実装の差分を詳細調査
- [ ] v2の挙動を完全再現
- [ ] テストケースを作成して動作検証

#### 2. フラッシュカード完全実装
- [x] **表示モード切り替え機能**
  - [x] カード表示モード（現在の実装）
    - 見やすいカード型UI
    - 使用頻度の表示追加（1-5の星または数値）
    - カード表示のまま維持
  - [x] リスト表示モード（v3互換）
    - v3の略語一覧リスト表記を再現
    - グリッド形式での一覧表示
  - [x] 切り替えトグルボタンをヘッダーに配置

- [ ] **学習モード実装**
  - [ ] カードめくり機能
    - タップで表裏を切り替え
    - スワイプで次のカードへ
  - [ ] 「覚えた」「復習」ボタン
  - [ ] 進捗管理（覚えたカード数）

- [ ] **試験モード実装**
  - [ ] ランダム出題機能
  - [ ] 4択問題形式
  - [ ] タイマー機能
  - [ ] 正答率計算・表示

- [ ] **統計機能**
  - [ ] LocalStorageによる学習進捗保存
  - [ ] 正答率・誤答履歴の記録
  - [ ] タグ別・略語別の統計表示
  - [ ] 学習カレンダー

#### 3. コッホ法の設定UI実装
- [ ] 設定画面の作成
  - [ ] 文字速度（Character Speed）設定 (5-40 WPM)
  - [ ] 実効速度（Effective Speed）設定 (5-40 WPM)
  - [ ] Farnsworth法の完全実装
  - [ ] 音響設定（周波数・音量）
  - [ ] 開始遅延設定

#### 4. コッホ法のグループベースキーボードUI
- [ ] ソフトキーボード設計・実装
  - [ ] 文字のグループ化ロジック（設定可能なサイズ 3-10文字）
  - [ ] 5xNグリッドレイアウト
  - [ ] 4グループ固定表示モード
  - [ ] 横スクロールモード
  - [ ] 学習状態に応じたボタン状態管理（学習済み/未学習）
  - [ ] グレーアウト表示（未学習文字）
  - [ ] 画面サイズに応じた自動推奨グループサイズ

### 優先度: 中

#### 5. コッホ法の統計・可視化
- [ ] レッスン別統計
  - [ ] 試行回数
  - [ ] 最高正答率
  - [ ] 累計時間
- [ ] 文字別統計
  - [ ] 正答回数・誤答回数
  - [ ] 正答率
  - [ ] ヒートマップ表示
- [ ] 練習履歴
  - [ ] カレンダービュー
  - [ ] グラフ表示（正答率推移）

#### 6. コッホ法のカスタム練習モード
- [ ] 任意の文字選択機能
- [ ] 復習モード（誤答文字のみ）
- [ ] 時間制限なし練習
- [ ] 練習時間設定（1-10分）

#### 7. 電鍵練習の拡張機能
- [ ] 文字列の追従練習（見本に合わせて送信）
- [ ] 送信速度測定・評価
- [ ] タイミング分析
- [ ] 送信精度の統計

### 優先度: 低

#### 8. UI/UX改善
- [ ] ダークモード実装（全ページ）
- [ ] アニメーション効果
- [ ] サウンドフィードバック
- [ ] ハプティックフィードバック（モバイル）

#### 9. PWA化
- [ ] Service Worker実装
- [ ] オフラインキャッシュ戦略
- [ ] manifest.json作成
- [ ] アイコン生成
- [ ] インストール可能化
- [ ] プッシュ通知（練習リマインダー）

#### 10. 追加コンテンツ
- [ ] 単語練習モード（コッホ法）
  - [ ] 一般的な英単語
  - [ ] アマチュア無線用語
- [ ] 平文練習モード
  - [ ] ニュース記事
  - [ ] 短編テキスト
- [ ] コールサイン練習
  - [ ] 実在のコールサインパターン
- [ ] QSO会話モード（フラッシュカード）
  - [ ] 実践的な交信シミュレーション
  - [ ] シナリオベース学習

## 🔧 技術的改善

### コード品質
- [ ] 共通コンポーネントの抽出
  - [ ] 設定モーダルの共通化
  - [ ] 統計表示の共通化
- [ ] TypeScript型定義の強化
- [ ] エラーハンドリングの改善
- [ ] ユニットテストの追加

### パフォーマンス
- [ ] ビルドサイズの最適化
- [ ] 遅延ロード（Lazy Loading）の検討
- [ ] Web Audio APIのメモリリーク対策

### アクセシビリティ
- [ ] キーボードナビゲーションの改善
- [ ] スクリーンリーダー対応
- [ ] ARIA属性の追加
- [ ] コントラスト比の確保

## 📝 ドキュメント

- [ ] 各機能の詳細な使い方ガイド
- [ ] 開発者向けドキュメント
- [ ] コントリビューションガイドライン
- [ ] APIドキュメント（共通モジュール）

## 🚀 将来の拡張構想

### v5の可能性
- AI活用
  - [ ] 音声認識によるモールス送信評価
  - [ ] 個人に最適化された学習プラン生成
  - [ ] リアルタイムフィードバック
- マルチプレイヤー機能
  - [ ] オンライン対戦（速度競争）
  - [ ] 協力学習モード
  - [ ] ランキング機能
- ハードウェア連携
  - [ ] 実物の電鍵との接続（Web Serial API）
  - [ ] Arduino/Raspberry Pi連携
  - [ ] MIDI デバイス対応

## 📊 優先順位マトリクス

| タスク | 優先度 | 工数 | 影響度 |
|-------|-------|------|-------|
| 横振り電鍵のv2互換性確保 | 高 | 中 | 高 |
| フラッシュカード完全実装 | 高 | 大 | 高 |
| コッホ法設定UI | 高 | 中 | 中 |
| グループベースキーボードUI | 高 | 大 | 中 |
| コッホ法統計・可視化 | 中 | 大 | 中 |
| PWA化 | 中 | 中 | 低 |
| 追加コンテンツ | 低 | 大 | 低 |

## 🔄 更新履歴

### 2025-10-06
- 初版作成
- 横振り電鍵のv2乖離問題を追記
- フラッシュカード表示モード切り替え要件を追記
- フラッシュカード機能改善:
  - 使用頻度の星表示（★☆）を実装
  - カード/リスト表示モード切り替え機能を実装
  - リスト表示はv3互換のテーブル形式で実装
