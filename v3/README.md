# モールス CW略語・Q符号 学習アプリ

CW通信で使用される略語とQ符号を効率的に学習するための教材アプリケーション

## 🎯 特徴

- **包括的な学習データ**: 120以上のCW略語・Q符号・信号レポートを収録
- **カテゴリ別学習**: 10のカテゴリで体系的に学習可能
- **使用頻度対応**: 5段階の使用頻度でよく使う略語を優先学習
- **複数の学習モード**: 一覧表示、フラッシュカード、試験モード
- **モールス再生機能**: 各略語をモールス信号で再生して実践的に学習
- **外部データ読み込み**: TSVファイルから柔軟にデータを管理

## 📋 収録内容

### カテゴリ一覧

- **送受・動作制御**: 送受信の制御や動作指示に関する略語
- **確認・返答**: 確認や返答に使用する略語
- **交信状況・状態確認(Q符号)**: 通信状態や信号品質を確認するQ符号
- **出力・速度調整(Q符号)**: 送信出力や速度調整のQ符号
- **周波数・通信操作(Q符号)**: 周波数や通信方法に関するQ符号
- **通信内容(Q符号)**: 通信内容や情報伝達のQ符号
- **挨拶・定型表現**: 挨拶や定型的な表現
- **設備・用語**: 設備や一般的な用語の略語
- **信号レポート**: RST信号レポート
- **RST詳細**: 信号レポートの詳細評価項目

### 使用頻度分類

- **頻度5**: 最も頻繁に使用される略語
- **頻度4**: よく使用される略語
- **頻度3**: 一般的に使用される略語
- **頻度2**: ときどき使用される略語
- **頻度1**: まれに使用される略語

具体的な略語の一覧は `flashcard.tsv` を参照してください。

## 🚀 使用方法

### モード一覧

アプリケーションは以下の3つのモードで構成されます:

#### 1. 一覧表示モード

全ての略語を表で閲覧できるモード

**機能:**
- カテゴリ別フィルタリング
- 使用頻度別フィルタリング (頻度5のみ、頻度4以上、など)
- カテゴリと頻度の組み合わせフィルタ
- 略語クリックでモールス符号を再生
- ソート機能 (カテゴリ順、使用頻度順、アルファベット順)
- 検索機能 (略語・英文・和訳から検索)

**表示内容:**
| 略語 | 英文 | 和訳 | 使用頻度 | カテゴリ |
|------|------|------|----------|----------|
| K | Go ahead | どうぞ | ⭐⭐⭐⭐⭐ | 送受・動作制御 |

**操作:**
- フィルタ選択: ドロップダウンメニューで選択
- 略語クリック: モールス符号を音声再生
- 再生速度: 設定でWPMを調整可能

#### 2. フラッシュカードモード

反復学習のための単語カードモード

**機能:**
- カテゴリ・使用頻度でフィルタして学習範囲を選択
- 表面に略語、裏面に意味を表示
- カードめくりアニメーション
- シャッフル機能
- 学習進捗の記録
- 「わかる/わからない」で仕分け
- わからないカードだけを復習

**操作:**
- **カードめくり**: クリックまたはスペースキー
- **次のカード**: 右矢印キー または 「次へ」ボタン
- **前のカード**: 左矢印キー または 「前へ」ボタン
- **モールス再生**: 「♪」ボタンで略語を再生
- **わかる**: ○ボタン (緑) - 次回学習時にスキップ
- **わからない**: ×ボタン (赤) - 復習対象として記録

**学習フロー:**
1. カテゴリ・頻度を選択して学習範囲を設定
2. 略語(表面)を見て意味を思い出す
3. カードをめくって答えを確認
4. 「わかる/わからない」を選択
5. 全カード終了後、わからないカードだけを復習

#### 3. 試験モード

理解度を確認するための試験モード

**機能:**
- カテゴリ・使用頻度で出題範囲を選択
- 選択式問題 (4択)
- 記述式問題 (入力式)
- ランダム出題
- 即座に正誤判定
- スコア表示
- 間違えた問題の復習

**出題形式:**
- **パターン1**: 略語を見て意味を選択
- **パターン2**: 意味を見て略語を選択
- **パターン3**: モールス音を聞いて略語を選択 (上級)

**操作:**
- 選択肢クリックで解答
- Enter キーで次の問題
- 試験終了後にスコアと間違えた問題を表示
- 間違えた問題のみ復習可能

## 📖 CW略語・Q符号について

### Q符号とは

Q符号は国際的に標準化された3文字の略語で、アマチュア無線のCW(モールス符号)通信において頻繁に使用されます。限られた符号で効率的に情報を伝達するための重要なツールです。

### Prosign (プロサイン)

Prosign (procedural signal) は、通信プロトコルを簡素化するための特殊な信号です。通常の文字とは異なり、**文字間スペースなしで連続送信**され、句読点や制御文字のような役割を果たします。

- 言語の壁を超えて普遍的に認識される
- 本アプリでは角括弧で表記 (例: `[AR]`, `[SK]`, `[BK]`)
- 送信時は文字間スペースを入れずに一つの符号として送る
- 文の終わり `[AR]`、交信終了 `[SK]`、送受交代 `[BK]` など

参考: [Prosigns for Morse code - Wikipedia](https://en.wikipedia.org/wiki/Prosigns_for_Morse_code)

### その他の略語

CW通信では効率化のため、Q符号以外にも様々な略語が使用されます。挨拶、定型表現、設備・状況を表す用語などが含まれます。

### RST信号レポート

CW通信では相手の信号品質を**RST**の3つの要素で報告します:

- **R (Readability / 了解度)**: 1-5の5段階評価
- **S (Signal Strength / 信号強度)**: 1-9の9段階評価
- **T (Tone / 音質)**: 1-9の9段階評価 (CWのみ)

詳細な略語の意味や使用例は `flashcard.tsv` または一覧表示モードで確認できます。

## 🛠️ 開発予定

### Phase 1: 基本機能実装
- [x] CW略語・Q符号データの準備 (flashcard.tsv, 120+項目)
- [ ] TSVファイル読み込み機能
- [ ] データパース・フィルタリング機能
- [ ] 一覧表示モード
  - [ ] カテゴリ/使用頻度フィルタ
  - [ ] 検索機能
  - [ ] ソート機能

### Phase 2: 学習機能実装
- [ ] フラッシュカードモード
  - [ ] カード表示UI
  - [ ] カードめくりアニメーション
  - [ ] 「わかる/わからない」判定
  - [ ] 学習進捗の保存 (LocalStorage)
- [ ] 試験モード
  - [ ] 4択問題生成
  - [ ] 正誤判定
  - [ ] スコア表示
  - [ ] 間違い問題の復習

### Phase 3: モールス機能統合
- [ ] v2の音声システム統合
  - [ ] AudioSystem クラスの統合
  - [ ] MorseCode 変換ロジックの統合
- [ ] 一覧モードでのモールス再生
- [ ] フラッシュカードモードでのモールス再生
- [ ] 試験モードでのモールス聴取問題

### Phase 4: 応用機能
- [ ] 間隔反復学習 (Spaced Repetition)
- [ ] 学習統計・グラフ表示
- [ ] モールス入力練習モード
- [ ] 実践的なQSO会話シミュレーション
- [ ] カスタムデータセット対応

## 📁 ファイル構成

```
v3/
├── README.md              # このファイル
├── index.html             # 本番用ファイル (ビルド済み)
└── src/                   # 開発環境
    ├── src/                   # TypeScriptソースコード
    │   ├── main.ts                # エントリーポイント
    │   ├── flashcard-data.ts      # TSVデータ読み込み・パース
    │   ├── list-mode.ts           # 一覧表示モード
    │   ├── flashcard-mode.ts      # フラッシュカードモード
    │   ├── exam-mode.ts           # 試験モード
    │   ├── audio-system.ts        # モールス音声生成 (v2から)
    │   ├── morse-code.ts          # モールス符号変換 (v2から)
    │   ├── settings.ts            # 設定管理
    │   └── ui-controls.ts         # UI制御とタブ管理
    ├── data/
    │   └── flashcard.tsv          # 学習データ (TSV形式)
    ├── index.html             # 開発用HTMLテンプレート
    ├── style.css              # スタイルシート
    ├── package.json           # 依存関係定義
    ├── tsconfig.json          # TypeScript設定
    └── vite.config.ts         # Viteビルド設定
```

## 📊 データフォーマット (flashcard.tsv)

TSV (タブ区切り) 形式で以下の5カラムから構成:

| カラム名 | 説明 | 例 |
|---------|------|-----|
| カテゴリ | 略語の分類 | 送受・動作制御 |
| 使用頻度 | 1-5の数値 (5が最頻出) | 5 |
| 略語 | CW略語・Q符号 | K |
| 英文 | 英語の意味 | Go ahead, invite reply |
| 和訳 | 日本語の意味 | どうぞ(送信をどうぞ) |

**データ例:**
```tsv
カテゴリ	使用頻度	略語	英文	和訳
送受・動作制御	5	K	Go ahead, invite reply	どうぞ(送信をどうぞ)
確認・返答	5	QSL	I acknowledge receipt	了解しました(QSLカードの意)
交信状況・状態確認(Q符号)	5	QRZ?	Who is calling me?	誰が私を呼んでいますか？
```

**注意:**
- 1行目はヘッダー行
- 各フィールドはタブ(`\t`)で区切られる
- 欧文2文字略語は `[AR]`, `[SK]` のように角括弧で表記

## 🚀 開発・ビルド

### セットアップ

v2の開発環境をベースに構築します:

```bash
cd v3/src
npm install
```

### 開発サーバー

```bash
npm run dev
```

開発サーバーが起動し、ホットリロード機能が有効になります。
→ http://localhost:3000

### ビルド

```bash
npm run build
```

`src/dist/index.html`に最適化された単一HTMLファイルが生成されます。

```bash
# 本番用ファイルとして配置
cp dist/index.html ../index.html
```

### プレビュー

```bash
npm run preview
```

ビルド後のファイルをローカルサーバーでプレビューします。

## 📋 技術スタック

| 技術 | バージョン | 用途 |
|------|-----------|------|
| TypeScript | 5.9.3 | 型安全な開発 |
| Vite | 7.1.8 | ビルドツール |
| vite-plugin-singlefile | - | 単一HTMLファイル化 |
| Web Audio API | - | モールス信号音声生成 |
| LocalStorage API | - | 学習進捗の永続化 |

## 📚 v2との違い

| 項目 | v2 (モールス練習) | v3 (学習アプリ) |
|------|------------------|-----------------|
| 主目的 | モールス信号の送受信練習 | CW略語・Q符号の学習 |
| 入力方式 | 電鍵シミュレーション | データ読み込み・選択式 |
| データ | モールス符号表 (固定) | TSVファイル (外部・拡張可能) |
| 学習機能 | なし | フラッシュカード・試験モード |
| フィルタ | なし | カテゴリ・使用頻度別 |
| 進捗管理 | なし | LocalStorageで保存 |
| 音声再生 | 入力に応じて再生 | 略語選択で再生 |

## 🌐 ブラウザ互換性

- Chrome/Edge: ✅ 完全対応
- Firefox: ✅ 完全対応
- Safari: ✅ 対応 (一部制限あり)
