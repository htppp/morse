# モールス練習アプリ v6 - コッホ法マルチモード版

v5の機能を拡張し、コッホ法トレーニングにマルチモード機能を追加したバージョンです。

## 🎯 v6の新機能

### コッホ法トレーニングのマルチモード化

v5のコッホ法トレーニングは1つのレッスン形式のみでしたが、v6では以下の3つのモードを提供します：

#### 1. **基本学習モード**（v5と同じ）
- 40文字を段階的に習得
- レッスン1から順番に進める
- 各レッスンで1文字ずつ新しい文字を追加
- 合格基準: 90%以上の正答率

#### 2. **試験モード**
- 学習済みの文字から任意のレッスンを選択してテスト
- フラッシュカードの試験モードと同様のUI/UX
- 合格/不合格判定あり
- 結果の表示と復習機能

#### 3. **任意文字列練習モード**
- 学習済みの任意の文字を選択して練習
- 自由にカスタマイズ可能な練習セット
- 繰り返し練習に最適
- 合否判定なし（練習のみ）

### UI/UX改善

#### モード選択タブ
- CW略語・Q符号学習と同様のタブUIを採用
- レッスン表示の上部に配置
- モード間のスムーズな切り替え

#### 統一された設定管理
- 全モード共通の設定（WPM、周波数、音量など）
- モード別設定の保持

## 📁 ディレクトリ構造

```
v6/src/
├── index.html          # 単一エントリーポイント
├── main.ts             # アプリケーション起動ファイル
├── core/               # 共有モジュール
│   ├── router.ts       # ルーティングシステム
│   ├── audio-system.ts # 音声システム
│   ├── morse-code.ts   # モールス符号変換
│   └── settings.ts     # 設定管理
├── modes/              # 各モード
│   ├── menu/           # メニュー画面
│   ├── vertical/       # 縦振り電鍵練習
│   ├── horizontal/     # 横振り電鍵練習
│   ├── flashcard/      # CW略語・Q符号学習
│   └── koch/           # コッホ法トレーニング（マルチモード）
│       ├── main.ts           # メインコントローラー
│       ├── settings.ts       # 設定管理
│       ├── lessons.ts        # レッスンデータ
│       ├── mode-learning.ts  # 基本学習モード NEW!
│       ├── mode-test.ts      # 試験モード NEW!
│       ├── mode-custom.ts    # 任意文字列練習モード NEW!
│       └── style.css         # スタイル
├── components/         # 再利用可能なコンポーネント
└── styles/             # グローバルスタイル
    └── global.css
```

## 🚀 開発とビルド

### 開発サーバーの起動
```bash
cd v6/src
npm install
npm run dev
```

ブラウザで http://localhost:3000 を開きます。

### プロダクションビルド
```bash
cd v6/src
npm run build
```

ビルドされたファイルは `v6/dist/index.html` に出力されます。

### プレビュー
```bash
cd v6/src
npm run preview
```

## 🎓 4つの練習モード

### 1. 縦振り電鍵練習 (#vertical)
縦振り電鍵（ストレートキー）の操作を練習します。

### 2. 横振り電鍵練習 (#horizontal)
横振り電鍵（パドル）の操作を練習します。
- Iambic A/Bモード対応
- パドルレイアウト切り替え可能

### 3. CW略語・Q符号学習 (#flashcard)
無線通信で使用する略語とQ符号を学習します。
- フラッシュカードモード
- 試験モード

### 4. コッホ法トレーニング (#koch) ⭐NEW: マルチモード対応
系統的にモールス符号を学習します。
- **基本学習モード**: 40文字を段階的に習得
- **試験モード**: 学習済み文字のテスト
- **任意文字列練習モード**: カスタマイズ可能な練習

## 🔄 v5からの主な変更点

### コッホ法トレーニングの拡張
- **v5**: 単一のレッスンモードのみ
- **v6**: 3つのモード（基本学習、試験、任意文字列練習）

### モード選択UI
- **v5**: レッスン一覧のみ
- **v6**: モード選択タブ + 各モードに対応したUI

### 設定管理
- **v5**: 単一モード用の設定
- **v6**: モード共通設定 + モード別設定の統合管理

## 📝 技術スタック

- **TypeScript**: 型安全性とコード品質の向上
- **Vite**: 高速なビルドツール
- **vite-plugin-singlefile**: 単一HTMLファイル生成
- **Web Audio API**: 音声生成

## 🔧 設定可能な項目

- 音量（0-100%）
- 周波数（100-2000Hz）
- 文字速度（Character Speed WPM）
- 実効速度（Effective Speed WPM）
- 練習時間（秒）
- グループサイズ（文字）
- Iambic A/Bモード（横振り電鍵）
- パドルレイアウト（normal/reversed）

## 📱 対応環境

- モダンブラウザ（Chrome, Firefox, Safari, Edge）
- デスクトップとモバイル対応
- Web Audio API対応必須

## 🐛 既知の問題

- 一部のブラウザでは初回音声再生時にユーザージェスチャーが必要
- iOS Safariでは音声の自動再生に制限あり

## 📄 ライセンス

ISC

## 👤 Author

モールス練習アプリ v6 - コッホ法マルチモード版
