<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>モールス体験</title>
  <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();//! 設定管理モジュール。
//! 設定値の型定義。
//! 設定管理クラス。
const p=class p{static get(t){return this.settings[t]}static set(t,e){this.settings[t]=e,this.updateUI()}static setTemp(t,e){this.settings[t]=e,this.updateUI()}static load(){const t=localStorage.getItem("morseSettings");t?this.settings={...this.defaultSettings,...JSON.parse(t)}:this.settings={...this.defaultSettings};const e=localStorage.getItem("morsePlayHistory");e&&(this.playHistory=JSON.parse(e))}static save(){localStorage.setItem("morseSettings",JSON.stringify(this.settings))}static saveTempSettings(){this.tempSettings=JSON.parse(JSON.stringify(this.settings))}static restoreTempSettings(){this.tempSettings&&(this.settings=JSON.parse(JSON.stringify(this.tempSettings)),this.tempSettings=null,this.updateUI(),this.updatePaddleLayout())}static applySettings(){this.save(),this.tempSettings=null}static addToHistory(t){this.playHistory.push(t),localStorage.setItem("morsePlayHistory",JSON.stringify(this.playHistory)),this.updateHistoryDisplay()}static clearHistory(){this.playHistory=[],localStorage.setItem("morsePlayHistory",JSON.stringify(this.playHistory)),this.updateHistoryDisplay()}static updateUI(){const t=document.getElementById("volumeRange"),e=document.getElementById("volumeInput");t&&e&&(t.value=String(this.settings.volume*100),e.value=String(Math.round(this.settings.volume*100)));const s=document.getElementById("globalFrequency");s&&(s.value=String(this.settings.frequency));const i=document.getElementById("globalWPM");i&&(i.value=String(this.settings.wpm));const n=document.getElementById("straightKey");n&&(n.value=this.settings.straightKey);const a=document.getElementById("paddleLeftKey");a&&(a.value=this.settings.paddleLeft);const d=document.getElementById("paddleRightKey");d&&(d.value=this.settings.paddleRight);const l=document.getElementById("iambicMode");l&&(l.checked=this.settings.iambicMode==="B");const h=document.getElementById("paddleLayout");h&&(h.checked=this.settings.paddleLayout==="reversed"),this.updateKeyHints(),this.updateHistoryDisplay(),this.updateJapaneseModeStatus(),this.updateIambicModeStatus(),this.updatePaddleLayoutStatus()}static updateKeyHints(){const t=document.getElementById("straightKeyHint");t&&(t.textContent=this.settings.straightKey);const e=document.getElementById("paddleKeysHint");e&&(e.textContent=this.settings.paddleLeft.toUpperCase()+" / "+this.settings.paddleRight.toUpperCase())}static updateHistoryDisplay(){const t=document.getElementById("playHistory");t&&(this.playHistory.length===0?t.textContent="再生履歴はありません":t.innerHTML=this.playHistory.map((e,s)=>`<div>${s+1}. ${e}</div>`).join(""))}static updateJapaneseModeStatus(){const t=document.getElementById("japaneseModeStatus"),e=document.getElementById("japaneseMode");t&&e&&(t.textContent=e.checked?"(現在: 和文)":"(現在: 欧文)")}static updateIambicModeStatus(){const t=document.getElementById("iambicModeStatus"),e=document.getElementById("iambicMode");t&&e&&(t.textContent=e.checked?"(現在: Iambic B)":"(現在: Iambic A)")}static updatePaddleLayoutStatus(){const t=document.getElementById("paddleLayoutStatus"),e=document.getElementById("paddleLayout");t&&e&&(t.textContent=e.checked?"(現在: 左:長点 / 右:短点)":"(現在: 左:短点 / 右:長点)")}static updatePaddleLayout(){const t=document.getElementById("paddleLeft"),e=document.getElementById("paddleRight");!t||!e||(this.settings.paddleLayout==="reversed"?(t.innerHTML="長点<br>ー",t.style.background="linear-gradient(135deg, #fa709a 0%, #fee140 100%)",e.innerHTML="短点<br>・",e.style.background="linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"):(t.innerHTML="短点<br>・",t.style.background="linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",e.innerHTML="長点<br>ー",e.style.background="linear-gradient(135deg, #fa709a 0%, #fee140 100%)"))}static setupEventListeners(){const t=document.getElementById("volumeRange"),e=document.getElementById("volumeInput");t&&t.addEventListener("input",c=>{const r=parseInt(c.target.value);this.setTemp("volume",r/100),e&&(e.value=String(r))}),e&&e.addEventListener("input",c=>{const r=Math.max(0,Math.min(100,parseInt(c.target.value)||0));this.setTemp("volume",r/100),t&&(t.value=String(r)),c.target.value=String(r)});const s=document.getElementById("globalFrequency");s&&s.addEventListener("change",c=>{let r=parseInt(c.target.value);(isNaN(r)||r<100)&&(r=100),r>2e3&&(r=2e3),c.target.value=String(r),this.setTemp("frequency",r)});const i=document.getElementById("globalWPM");i&&i.addEventListener("change",c=>{let r=parseInt(c.target.value);(isNaN(r)||r<1)&&(r=1),r>999&&(r=999),c.target.value=String(r),this.setTemp("wpm",r)});const n=document.getElementById("straightKey");n&&n.addEventListener("change",c=>{this.setTemp("straightKey",c.target.value.trim()||"Space")});const a=document.getElementById("paddleLeftKey");a&&a.addEventListener("change",c=>{this.setTemp("paddleLeft",c.target.value.trim()||"j")});const d=document.getElementById("paddleRightKey");d&&d.addEventListener("change",c=>{this.setTemp("paddleRight",c.target.value.trim()||"k")});const l=document.getElementById("iambicMode");l&&l.addEventListener("change",c=>{this.setTemp("iambicMode",c.target.checked?"B":"A"),this.updateIambicModeStatus()});const h=document.getElementById("paddleLayout");h&&h.addEventListener("change",c=>{this.setTemp("paddleLayout",c.target.checked?"reversed":"normal"),this.updatePaddleLayoutStatus(),this.updatePaddleLayout()});const m=document.getElementById("japaneseMode");m&&m.addEventListener("change",()=>{this.updateJapaneseModeStatus()});const T=document.getElementById("clearHistory");T&&T.addEventListener("click",()=>{this.clearHistory()})}static init(){this.load(),this.updateUI(),this.setupEventListeners(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{this.updatePaddleLayout()}):this.updatePaddleLayout()}};p.defaultSettings={volume:.3,frequency:600,wpm:20,straightKey:"Space",paddleLeft:"j",paddleRight:"k",iambicMode:"B",paddleLayout:"normal"},p.settings={...p.defaultSettings},p.playHistory=[],p.tempSettings=null;let o=p;//! 音声システムモジュール。
//! 音声システムクラス。
const y=class y{static ensureAudioContext(){this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext.state==="suspended"&&this.audioContext.resume()}static ensureSidetone(){if(this.ensureAudioContext(),!this.sidOsc&&this.audioContext){this.sidOsc=this.audioContext.createOscillator(),this.sidGain=this.audioContext.createGain(),this.sidFilter=this.audioContext.createBiquadFilter();const t=this.audioContext.createDynamicsCompressor();this.sidOsc.type="sine",this.sidOsc.frequency.value=o.get("frequency"),this.sidGain.gain.value=0,this.sidFilter.type="bandpass",this.sidFilter.frequency.value=o.get("frequency"),this.sidFilter.Q.value=10,t.threshold.value=-18,t.ratio.value=2,t.attack.value=.001,t.release.value=.08,this.sidOsc.connect(this.sidGain),this.sidGain.connect(this.sidFilter),this.sidFilter.connect(t),t.connect(this.audioContext.destination),this.sidOsc.start()}}static scheduleTone(t,e){if(this.ensureAudioContext(),!!this.audioContext){this.audioContext.state==="suspended"&&this.audioContext.resume();try{const s=this.audioContext.createOscillator(),i=this.audioContext.createGain();s.connect(i),i.connect(this.audioContext.destination);const n=o.get("frequency"),a=o.get("volume");s.frequency.value=n,s.type="sine";const d=this.audioContext.currentTime,l=Math.max(d,t);i.gain.setValueAtTime(0,l),i.gain.linearRampToValueAtTime(a,l+.001),i.gain.setValueAtTime(a,l+(e-1)/1e3),i.gain.linearRampToValueAtTime(0,l+e/1e3),s.start(l),s.stop(l+e/1e3)}catch(s){console.error("音声エラー:",s)}}}static startContinuousTone(){if(this.ensureAudioContext(),!!this.audioContext){this.audioContext.state==="suspended"&&this.audioContext.resume();try{if(window.currentStraightOsc)try{window.currentStraightOsc.stop()}catch{}const t=this.audioContext.createOscillator(),e=this.audioContext.createGain();t.connect(e),e.connect(this.audioContext.destination);const s=o.get("frequency"),i=o.get("volume");t.frequency.value=s,t.type="sine";const n=this.audioContext.currentTime;e.gain.setValueAtTime(0,n),e.gain.linearRampToValueAtTime(i,n+.001),t.start(n),window.currentStraightOsc=t,window.currentStraightGain=e}catch(t){console.error("連続音開始エラー:",t)}}}static stopContinuousTone(){if(this.audioContext)try{if(window.currentStraightOsc&&window.currentStraightGain){const t=this.audioContext.currentTime;window.currentStraightGain.gain.cancelScheduledValues(t),window.currentStraightGain.gain.setValueAtTime(window.currentStraightGain.gain.value,t),window.currentStraightGain.gain.linearRampToValueAtTime(0,t+.001),window.currentStraightOsc.stop(t+.002),window.currentStraightOsc=null,window.currentStraightGain=null}}catch(t){console.error("連続音停止エラー:",t)}}static async playMorseString(t){if(this.isPlaying||!t||t==="モールス信号が表示されます"||(this.ensureAudioContext(),this.ensureSidetone(),!this.audioContext))return!1;this.isPlaying=!0;const e=o.get("frequency");this.sidOsc&&this.sidFilter&&(this.sidOsc.frequency.setValueAtTime(e,this.audioContext.currentTime),this.sidFilter.frequency.setValueAtTime(e,this.audioContext.currentTime));const i=1200/o.get("wpm"),n=i,a=3*i,d=i,l=3*i,h=7*i;let m=this.audioContext.currentTime+.02;for(let r=0;r<t.length&&this.isPlaying;r++){const E=t[r];E==="."?(this.scheduleTone(m,n),m+=(n+d)/1e3):E==="-"?(this.scheduleTone(m,a),m+=(a+d)/1e3):E===" "?m+=(l-d)/1e3:E==="/"&&(m+=(h-d)/1e3)}const T=(m-this.audioContext.currentTime)*1e3;await new Promise(r=>setTimeout(r,T));const c=this.isPlaying;return this.isPlaying=!1,c}static stopPlaying(){if(this.isPlaying=!1,this.sidGain&&this.audioContext){const t=this.audioContext.currentTime;this.sidGain.gain.cancelScheduledValues(t),this.sidGain.gain.setValueAtTime(0,t)}}static init(){document.addEventListener("click",()=>{this.ensureAudioContext()},{once:!0}),document.addEventListener("keydown",()=>{this.ensureAudioContext()},{once:!0})}};y.audioContext=null,y.sidOsc=null,y.sidGain=null,y.sidFilter=null,y.isPlaying=!1;let f=y;//! モールス符号マッピングと変換機能。
//! モールス符号のマッピング型定義。
//! 欧文モールス符号マップ。
const b={A:".-",B:"-...",C:"-.-.",D:"-..",E:".",F:"..-.",G:"--.",H:"....",I:"..",J:".---",K:"-.-",L:".-..",M:"--",N:"-.",O:"---",P:".--.",Q:"--.-",R:".-.",S:"...",T:"-",U:"..-",V:"...-",W:".--",X:"-..-",Y:"-.--",Z:"--..",0:"-----",1:".----",2:"..---",3:"...--",4:"....-",5:".....",6:"-....",7:"--...",8:"---..",9:"----."," ":"/",".":".-.-.-",",":"--..--",":":"---...","?":"..--..",_:"..--.-","+":".-.-.","-":"-....-","×":"-..-","^":"......","/":"-..-.","@":".--.-.","(":"-.--.",")":"-.--.-",'"':".-..-.","'":".----.",HH:"........","=":"-...-",VA:"...-.-",AS:".-...",VE:"...-."};//! 和文モールス符号マップ。
const C={ア:"--.--",イ:".-",ウ:"..-",エ:"-.---",オ:".-...",カ:".-..",キ:"-.-..",ク:"...-",ケ:"-.--",コ:"----",サ:"-.-.-",シ:"--.-.",ス:"---.-",セ:".---.",ソ:"---.",タ:"-.",チ:"..-.",ツ:".--.",テ:".-.--",ト:"..-..",ナ:".-.",ニ:"-.-.",ヌ:"....",ネ:"--.-",ノ:"..--",ハ:"-...",ヒ:"--..-",フ:"--..",ヘ:".",ホ:"-..",マ:"-..-",ミ:"..-.-",ム:"-",メ:"-...-",モ:"-..-.",ヤ:".--",ユ:"-..--",ヨ:"--",ラ:"...",リ:"--.",ル:"-.--.",レ:"---",ロ:".-.-",ワ:"-.-",ヲ:".---",ン:".-.-.",ヱ:".--..",ヰ:".-..-.","゛":"..","゜":"..--.",ー:".--.-","、":".-.-.-.-","」":".-.-..","（":"-.--.-","）":".-..-.-",ホレ:"-..----",ラタ:"...-.-","(":"-.--.",")":"-.--.-"," ":"/",0:"-----",1:".----",2:"..---",3:"...--",4:"....-",5:".....",6:"-....",7:"--...",8:"---..",9:"----."};//! モールス符号モジュール。
class v{static getCurrentMorseMap(){return document.getElementById("japaneseMode")?.checked?C:b}static getCurrentMorseToCharMap(){const t=this.getCurrentMorseMap();return Object.fromEntries(Object.entries(t).map(([e,s])=>[s,e]))}static textToMorse(t){const e=this.getCurrentMorseMap(),s=t.toUpperCase();return Array.from(s).map(i=>e[i]||i).join(" ")}static morseSequencesToText(t){const e=this.getCurrentMorseToCharMap();let s="";for(const i of t)i==="/"?s+=" ":i&&i!==""&&(s+=e[i]||"?");return s}static combineDakutenHandakuten(t){return t}}//! UIコントロールとタブ管理モジュール。
//! テキストログアイテムの型定義。
//! UIコントロールクラス。
const L=class L{static initTabs(){const t=localStorage.getItem("activeTab");t&&this.switchToTab(t),document.querySelectorAll(".tab").forEach(e=>{e.addEventListener("click",function(){const s=this.dataset.tab;s&&L.switchToTab(s)})})}static switchToTab(t){document.querySelectorAll(".tab").forEach(i=>i.classList.remove("active"));const e=document.querySelector(`.tab[data-tab="${t}"]`);e&&e.classList.add("active"),document.querySelectorAll(".tab-content").forEach(i=>{i.classList.remove("active")});const s=document.getElementById(t+"-content");s&&s.classList.add("active"),t==="paddle"&&o.updatePaddleLayout(),localStorage.setItem("activeTab",t)}static initSettingsModal(){const t=document.getElementById("settingsIcon"),e=document.getElementById("settingsModal"),s=document.getElementById("settingsCancel"),i=document.getElementById("settingsOK");t&&t.addEventListener("click",()=>{e&&(o.saveTempSettings(),e.classList.add("active"))}),s&&s.addEventListener("click",()=>{e&&(o.restoreTempSettings(),e.classList.remove("active"))}),i&&i.addEventListener("click",()=>{e&&(o.applySettings(),e.classList.remove("active"))}),e&&(e.addEventListener("mousedown",n=>{this.modalMouseDownInside=n.target.closest(".settings-content")!==null}),e.addEventListener("click",n=>{n.target.id==="settingsModal"&&!this.modalMouseDownInside&&(o.restoreTempSettings(),e.classList.remove("active")),this.modalMouseDownInside=!1}))}static initTextConversion(){const t=document.getElementById("textInput"),e=document.getElementById("playButton"),s=document.getElementById("stopButton"),i=document.getElementById("clearTextButton"),n=document.getElementById("morseOutput");t&&(t.addEventListener("input",a=>{const d=a.target.value.toUpperCase(),l=v.textToMorse(d);n&&(n.textContent=l||"モールス信号が表示されます")}),t.addEventListener("keydown",a=>{if(a.key==="Enter"){a.preventDefault();const d=t.value.trim();d&&(o.addToHistory(d),this.playMorseText())}})),e&&e.addEventListener("click",()=>{this.playMorseText()}),s&&s.addEventListener("click",()=>{f.stopPlaying(),e&&(e.disabled=!1),s.disabled=!0}),i&&i.addEventListener("click",()=>{this.clearTextInput()})}static async playMorseText(){const t=document.getElementById("textInput"),e=document.getElementById("playButton"),s=document.getElementById("stopButton"),i=document.getElementById("morseOutput");if(!t||!e||!s||!i)return;const n=i.textContent;if(!(!n||n==="モールス信号が表示されます")){e.disabled=!0,s.disabled=!1;try{await f.playMorseString(n)}catch(a){console.error("再生エラー:",a)}finally{e.disabled=!1,s.disabled=!0}}}static initTextLog(){const t=document.getElementById("textInput"),e=document.getElementById("playButton");document.getElementById("textLog");const s=document.getElementById("clearTextLog"),i=localStorage.getItem("morseTextLog");if(i)try{const n=JSON.parse(i);Array.isArray(n)&&n.length>0&&typeof n[0]=="string"?(this.textLogArr=n.map((a,d)=>({text:a,favorite:!1,id:Date.now()+d})),this.saveTextLog()):Array.isArray(n)?this.textLogArr=n:this.textLogArr=[],this.renderTextLog()}catch(n){console.error("ログ読み込みエラー:",n),this.textLogArr=[]}t&&t.addEventListener("keydown",n=>{n.key==="Enter"&&this.acceptTextInput()}),e&&e.addEventListener("click",()=>{this.acceptTextInput()}),s&&s.addEventListener("click",()=>{this.clearTextLog()})}static acceptTextInput(){const t=document.getElementById("textInput");if(!t)return;const e=t.value.trim();e&&(this.addTextLog(e),this.playTextInput(e),t.value="")}static addTextLog(t){const e={id:Date.now()+Math.random(),text:t,favorite:!1};this.textLogArr.push(e),this.renderTextLog(),this.saveTextLog()}static saveTextLog(){localStorage.setItem("morseTextLog",JSON.stringify(this.textLogArr))}static renderTextLog(){const t=document.getElementById("textLog");t&&(t.innerHTML=this.textLogArr.slice().reverse().map(e=>{const s=e.favorite?"★":"☆",i=e.favorite?"favorite-star active":"favorite-star";return`
					<li data-id="${e.id}">
						<span class="log-text">${e.text}</span>
						<button class="${i}" data-id="${e.id}">${s}</button>
					</li>
				`}).join(""),t.querySelectorAll(".log-text").forEach(e=>{e.style.cursor="pointer",e.addEventListener("click",()=>{this.selectLogItem(e.textContent||"")}),e.addEventListener("mouseenter",()=>{e.parentElement&&(e.parentElement.style.backgroundColor="#d6e3ff")}),e.addEventListener("mouseleave",()=>{e.parentElement&&(e.parentElement.style.backgroundColor="")})}),t.querySelectorAll(".favorite-star").forEach(e=>{e.addEventListener("click",s=>{s.stopPropagation();const i=e.dataset.id;i&&this.toggleFavorite(i)})}))}static toggleFavorite(t){const e=this.textLogArr.find(s=>String(s.id)===t);e&&(e.favorite=!e.favorite,this.renderTextLog(),this.saveTextLog())}static clearTextLog(){this.textLogArr=this.textLogArr.filter(t=>t.favorite),this.renderTextLog(),this.saveTextLog()}static playTextInput(t){const e=document.getElementById("textInput");if(e){e.value=t;const s=v.textToMorse(t),i=document.getElementById("morseOutput");i&&(i.textContent=s||"モールス信号が表示されます")}}static selectLogItem(t){const e=document.getElementById("textInput"),s=document.getElementById("morseOutput");if(e){if(e.value=t,s){const i=v.textToMorse(t);s.textContent=i||"モールス信号が表示されます"}this.playMorseText()}}static clearTextInput(){const t=document.getElementById("textInput"),e=document.getElementById("morseOutput");t&&(t.value=""),e&&(e.textContent="モールス信号が表示されます"),f.stopPlaying();const s=document.getElementById("playButton"),i=document.getElementById("stopButton");s&&i&&(s.disabled=!1,i.disabled=!0)}static init(){this.initTabs(),this.initSettingsModal(),this.initTextConversion(),this.initTextLog()}};L.modalMouseDownInside=!1,L.textLogArr=[];let I=L;//! 縦振り電鍵機能モジュール。
//! タイミング設定の型定義。
//! 縦振り電鍵クラス。
const g=class g{static getTimings(){const e=1200/o.get("wpm");return{dot:e,dash:e*3,charGap:e*4,wordGap:e*7}}static clearTimers(){this.charTimer!==null&&(clearTimeout(this.charTimer),this.charTimer=null),this.wordTimer!==null&&(clearTimeout(this.wordTimer),this.wordTimer=null)}static setTimers(){this.clearTimers();const t=this.getTimings();this.charTimer=window.setTimeout(()=>{this.sequence&&(this.buffer+=this.sequence+" ",this.sequence="",this.updateDisplay())},t.charGap),this.wordTimer=window.setTimeout(()=>{this.sequence&&(this.buffer+=this.sequence+" ",this.sequence=""),this.buffer.endsWith("/ ")||(this.buffer+="/ "),this.updateDisplay()},t.wordGap)}static onKeyDown(){this.keyDown||(this.keyDown=!0,this.keyDownTime=Date.now(),this.clearTimers(),f.startContinuousTone())}static onKeyUp(){if(!this.keyDown)return;this.keyDown=!1;const t=Date.now()-this.keyDownTime;f.stopContinuousTone();const e=this.getTimings(),s=t<e.dash?".":"-";this.sequence+=s,this.lastInputTime=Date.now(),this.updateDisplay(),this.setTimers()}static updateDisplay(){let t="";this.buffer&&(t=this.buffer.trim()),this.sequence&&(t&&(t+=" "),t+=`[${this.sequence}]`);const e=document.getElementById("straightMorseDisplay");e&&(e.textContent=t||"入力されたモールス信号"),this.updateDecoded()}static updateDecoded(){const t=this.buffer.trim().split(/\s+/),e=v.morseSequencesToText(t),s=document.getElementById("straightDecoded");s&&(s.textContent=e||"解読された文字")}static clear(){this.buffer="",this.sequence="",this.clearTimers(),this.updateDisplay()}static setupEventListeners(){const t=document.getElementById("morseKey");t&&(t.addEventListener("mousedown",()=>this.onKeyDown()),t.addEventListener("mouseup",()=>this.onKeyUp()),t.addEventListener("mouseleave",()=>{this.keyDown&&this.onKeyUp()}));const e=document.getElementById("straightClear");e&&e.addEventListener("click",()=>this.clear()),document.addEventListener("keydown",s=>{if(s.target.tagName==="INPUT"||s.target.tagName==="TEXTAREA"||s.repeat)return;const i=document.querySelector(".tab.active");if(!i||i.dataset.tab!=="straight")return;const n=o.get("straightKey");(s.key===n||n==="Space"&&s.code==="Space")&&(s.preventDefault(),this.onKeyDown())}),document.addEventListener("keyup",s=>{if(s.target.tagName==="INPUT"||s.target.tagName==="TEXTAREA")return;const i=document.querySelector(".tab.active");if(!i||i.dataset.tab!=="straight")return;const n=o.get("straightKey");(s.key===n||n==="Space"&&s.code==="Space")&&(s.preventDefault(),this.onKeyUp())})}static init(){this.setupEventListeners()}};g.keyDown=!1,g.keyDownTime=0,g.buffer="",g.sequence="",g.lastInputTime=0,g.charTimer=null,g.wordTimer=null;let w=g;//! 横振り電鍵機能モジュール。
//! タイミング設定の型定義。
//! 横振り電鍵クラス。
const u=class u{static getTimings(){const e=1200/o.get("wpm");return{dot:e,dash:e*3,charGap:e*4,wordGap:e*7}}static clearTimers(){this.charTimer!==null&&(clearTimeout(this.charTimer),this.charTimer=null),this.wordTimer!==null&&(clearTimeout(this.wordTimer),this.wordTimer=null)}static setTimers(){this.clearTimers();const t=this.getTimings();this.charTimer=window.setTimeout(()=>{this.sequence&&(this.buffer+=this.sequence+" ",this.sequence="",this.updateDisplay())},t.charGap),this.wordTimer=window.setTimeout(()=>{this.sequence&&(this.buffer+=this.sequence+" ",this.sequence=""),this.buffer.endsWith("/ ")||(this.buffer+="/ "),this.updateDisplay()},t.wordGap)}static sendPaddleElement(t){if(this.sending)return;this.sending=!0,this.clearTimers(),this.leftDown&&this.rightDown||(this.squeezeDetected=!1);const e=1200/o.get("wpm"),s=t==="."?e:e*3;f.scheduleTone(0,s),this.sequence+=t,this.lastInputTime=Date.now(),this.updateDisplay(),this.lastSent=t,setTimeout(()=>{const i=o.get("iambicMode"),n=this.leftDown&&this.rightDown;i==="B"&&this.squeezeDetected&&!this.forceNextElement&&(t==="."?this.forceNextElement="-":t==="-"&&(this.forceNextElement=".")),n&&!this.forceNextElement&&(t==="."?this.forceNextElement="-":t==="-"&&(this.forceNextElement="."))},s-5),setTimeout(()=>{if(this.sending=!1,!this.leftDown){const i=document.getElementById("paddleLeft");i&&i.classList.remove("active")}if(!this.rightDown){const i=document.getElementById("paddleRight");i&&i.classList.remove("active")}this.updateSqueezeIndicator(),this.forceNextElement?this.scheduleNext():this.leftDown||this.rightDown?this.scheduleNext():this.setTimers()},s+e)}static scheduleNext(){const e=o.get("paddleLayout")==="reversed";if(this.forceNextElement){const s=this.forceNextElement;this.forceNextElement=null,this.sendPaddleElement(s)}else if(this.leftDown&&this.rightDown){const s=this.lastSent==="."?"-":".";this.sendPaddleElement(s)}else if(this.leftDown){const s=e?"-":".";this.sendPaddleElement(s)}else if(this.rightDown){const s=e?".":"-";this.sendPaddleElement(s)}}static updateSqueezeIndicator(){const t=this.leftDown&&this.rightDown;this.isSqueezing=t;const e=document.getElementById("squeezeIndicator");e&&(t?(e.classList.add("active"),this.squeezeOccurred=!0):e.classList.remove("active"))}static onLeftDown(){const t=o.get("iambicMode");this.leftDown=!0;const e=document.getElementById("paddleLeft");if(e&&e.classList.add("active"),this.updateSqueezeIndicator(),t==="B"&&this.sending&&this.rightDown){const s=o.get("paddleLayout");this.forceNextElement=s==="reversed"?"-":".",this.squeezeDetected=!0}if(!this.sending){const i=o.get("paddleLayout")==="reversed"?"-":".";this.sendPaddleElement(i)}}static onRightDown(){const t=o.get("iambicMode");this.rightDown=!0;const e=document.getElementById("paddleRight");if(e&&e.classList.add("active"),this.updateSqueezeIndicator(),t==="B"&&this.sending&&this.leftDown){const s=o.get("paddleLayout");this.forceNextElement=s==="reversed"?".":"-",this.squeezeDetected=!0}if(!this.sending){const i=o.get("paddleLayout")==="reversed"?".":"-";this.sendPaddleElement(i)}}static onLeftUp(){this.leftDown=!1,this.dashReqCount=0;const t=document.getElementById("paddleLeft");t&&t.classList.remove("active"),this.updateSqueezeIndicator(),o.get("iambicMode")==="B"&&this.isSqueezing&&this.rightDown&&!this.sending&&setTimeout(()=>{if(this.rightDown&&!this.sending){const i=o.get("paddleLayout")==="reversed"?".":"-";this.sendPaddleElement(i)}},10)}static onRightUp(){this.rightDown=!1,this.dotReqCount=0;const t=document.getElementById("paddleRight");t&&t.classList.remove("active"),this.updateSqueezeIndicator();const e=o.get("iambicMode");if(e==="B"&&this.isSqueezing&&this.leftDown&&!this.sending&&setTimeout(()=>{if(this.leftDown&&!this.sending){const i=o.get("paddleLayout")==="reversed"?"-":".";this.sendPaddleElement(i)}},10),!this.leftDown&&!this.rightDown&&this.squeezeOccurred){if(e==="B"&&this.lastSent==="-")if(this.sending)this.dotReqCount++;else{const i=o.get("paddleLayout")==="reversed"?"-":".";this.sendPaddleElement(i)}this.squeezeOccurred=!1}}static updateDisplay(){let t="";this.buffer&&(t=this.buffer.trim()),this.sequence&&(t&&(t+=" "),t+=`[${this.sequence}]`);const e=document.getElementById("paddleMorseDisplay");e&&(e.textContent=t||"入力されたモールス信号"),this.updateDecoded()}static updateDecoded(){const t=this.buffer.trim().split(/\s+/),e=v.morseSequencesToText(t),s=document.getElementById("paddleDecoded");s&&(s.textContent=e||"解読された文字")}static clear(){this.buffer="",this.sequence="",this.clearTimers(),this.updateDisplay()}static setupEventListeners(){let t=!1,e=!1;const s=document.getElementById("paddleLeft");s&&(s.addEventListener("mousedown",a=>{a.preventDefault(),t||(t=!0,this.onLeftDown())}),s.addEventListener("mouseup",a=>{a.preventDefault(),t&&(t=!1,this.onLeftUp())}));const i=document.getElementById("paddleRight");i&&(i.addEventListener("mousedown",a=>{a.preventDefault(),e||(e=!0,this.onRightDown())}),i.addEventListener("mouseup",a=>{a.preventDefault(),e&&(e=!1,this.onRightUp())})),document.addEventListener("mouseup",()=>{t&&(t=!1,this.onLeftUp()),e&&(e=!1,this.onRightUp())});const n=document.getElementById("paddleClear");n&&n.addEventListener("click",()=>this.clear()),document.addEventListener("keydown",a=>{if(a.target.tagName==="INPUT"||a.target.tagName==="TEXTAREA"||a.repeat)return;const d=document.querySelector(".tab.active");if(!d||d.dataset.tab!=="paddle")return;const l=o.get("paddleLeft"),h=o.get("paddleRight");a.key.toLowerCase()===l.toLowerCase()?(a.preventDefault(),this.onLeftDown()):a.key.toLowerCase()===h.toLowerCase()&&(a.preventDefault(),this.onRightDown())}),document.addEventListener("keyup",a=>{if(a.target.tagName==="INPUT"||a.target.tagName==="TEXTAREA")return;const d=document.querySelector(".tab.active");if(!d||d.dataset.tab!=="paddle")return;const l=o.get("paddleLeft"),h=o.get("paddleRight");a.key.toLowerCase()===l.toLowerCase()?(a.preventDefault(),this.onLeftUp()):a.key.toLowerCase()===h.toLowerCase()&&(a.preventDefault(),this.onRightUp())})}static init(){this.setupEventListeners()}};u.leftDown=!1,u.rightDown=!1,u.buffer="",u.sequence="",u.sending=!1,u.lastSent=null,u.lastInputTime=0,u.charTimer=null,u.wordTimer=null,u.dotReqCount=0,u.dashReqCount=0,u.forceNextElement=null,u.isSqueezing=!1,u.squeezeOccurred=!1,u.squeezeDetected=!1;let x=u;//! メインアプリケーション初期化。
//! アプリケーションのメイン初期化。
document.addEventListener("DOMContentLoaded",()=>{console.log("モールスアプリケーション初期化開始"),o.init(),console.log("設定モジュール初期化完了"),f.init(),console.log("音声システム初期化完了"),I.init(),console.log("UIコントロール初期化完了"),w.init(),console.log("縦振り電鍵初期化完了"),x.init(),console.log("横振り電鍵初期化完了"),console.log("モールスアプリケーション初期化完了")});</script>
  <style rel="stylesheet" crossorigin>*{box-sizing:border-box;margin:0;padding:0}body{font-family:Segoe UI,Courier New,monospace;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:20px}.settings-icon{position:fixed;top:20px;right:20px;width:50px;height:50px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 15px #0003;z-index:100;transition:all .3s ease}.settings-icon:hover{transform:rotate(90deg) scale(1.1)}.settings-icon svg{width:28px;height:28px;fill:#667eea}.settings-modal{display:none;position:fixed;inset:0;background:#00000080;z-index:200;align-items:center;justify-content:center;padding:20px}.settings-modal.active{display:flex}.settings-content{background:#fff;border-radius:20px;padding:30px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;scrollbar-width:none;-ms-overflow-style:none}.settings-content::-webkit-scrollbar{display:none}.settings-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding-bottom:15px;border-bottom:2px solid #e0e0e0}.settings-header h2{font-size:24px;color:#333}.close-btn{background:none;border:none;font-size:32px;cursor:pointer;color:#999;padding:0;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.close-btn:hover{background:#f0f0f0;color:#333}.container{max-width:900px;margin:0 auto;background:#fff;border-radius:25px;box-shadow:0 20px 60px #0000004d;overflow:hidden}.header{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:30px;text-align:center;border-radius:20px 20px 0 0}.header h1{font-size:28px;font-weight:600}.tabs{display:flex;background:#f8f9fa;border-bottom:2px solid #e0e0e0}.tab{flex:1;padding:16px 20px;background:transparent;border:none;cursor:pointer;font-size:15px;font-weight:600;color:#666;transition:all .3s ease;border-bottom:3px solid transparent}.tab:hover{background:#e9ecef;color:#333}.tab.active{background:#fff;color:#667eea;border-bottom-color:#667eea}.tab-content{display:none;padding:30px}.tab-content.active{display:block}.section{margin-bottom:25px;padding:25px;background:#f8f9fa;border-radius:12px;border:1px solid #e0e0e0}.section h2{margin:0 0 20px;color:#333;font-size:20px;font-weight:600;padding-bottom:12px;border-bottom:2px solid #667eea}input,textarea,button,select{font-size:15px;padding:12px 16px;border:2px solid #ddd;border-radius:8px;transition:all .3s ease}#textLog{border:1.5px solid #667eea;background:#f8f9fa;font-size:16px;margin-bottom:10px;padding:10px 16px;border-radius:8px;list-style:none;overflow-y:visible;height:auto;max-height:none;min-height:0;transition:height .2s}#textLog li{padding:7px 12px;margin-bottom:4px;background:#fff;border-radius:6px;border:1px solid #e0e0e0;box-shadow:0 1px 4px #667eea12;transition:background .2s;display:flex;justify-content:space-between;align-items:center}#textLog li:hover{background:#d6e3ff;transform:translate(3px);transition:all .2s ease}.log-text{flex:1;cursor:pointer;padding-right:8px}.favorite-star{background:transparent;border:none;outline:none;font-size:16px;cursor:pointer;padding:0;margin:0;color:#ccc;transition:all .2s ease;min-width:auto;height:auto;display:inline-flex;align-items:center;justify-content:center;box-shadow:none;position:relative;z-index:1}.favorite-star:hover{background:transparent;color:gold;transform:scale(1.2);box-shadow:none}.favorite-star:focus{outline:none;box-shadow:none}.favorite-star.active{color:gold;text-shadow:0 0 4px rgba(255,215,0,.5)}.favorite-star.active:hover{color:#ffed4e;transform:scale(1.2)}input:focus,textarea:focus,select:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}input[type=text],textarea{width:100%;margin-bottom:15px}input[type=number]{width:100%;-moz-appearance:textfield}input[type=number]::-webkit-outer-spin-button,input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}button{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;cursor:pointer;font-weight:600;padding:12px 24px;box-shadow:0 4px 15px #667eea66}button:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea99}button:active{transform:translateY(0)}button:disabled{background:#ccc;cursor:not-allowed;box-shadow:none}.morse-display{font-family:Courier New,monospace;font-size:18px;background:#fff;padding:20px;border-radius:8px;min-height:60px;word-wrap:break-word;letter-spacing:2px;border:2px solid #e0e0e0;margin-bottom:15px}.controls{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:15px}.morse-key{font-size:32px;font-weight:700;padding:50px 70px;background:linear-gradient(135deg,#f093fb,#f5576c);color:#fff;border:none;border-radius:50%;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-touch-callout:none;margin:30px auto;display:block;min-width:200px;min-height:200px;box-shadow:0 10px 30px #f5576c66;transition:all .2s ease;cursor:pointer}.morse-key:hover{transform:translateY(-5px) scale(1.02)}.morse-key:active{transform:translateY(0) scale(.98)}.paddle-container{display:flex;justify-content:center;gap:30px;margin:30px auto}.paddle-key{font-size:22px;font-weight:700;padding:40px 50px;color:#fff;border:none;border-radius:15px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-touch-callout:none;min-width:140px;min-height:170px;box-shadow:0 8px 25px #0000004d;transition:all .2s ease;cursor:pointer}.paddle-left{background:linear-gradient(135deg,#4facfe,#00f2fe)}.paddle-left:hover{transform:translateY(-5px)}.paddle-left:active,.paddle-left.active{transform:scale(.95)}.paddle-right{background:linear-gradient(135deg,#fa709a,#fee140)}.paddle-right:hover{transform:translateY(-5px)}.paddle-right:active,.paddle-right.active{transform:scale(.95)}.keyboard-hint{text-align:center;font-size:14px;color:#666;margin-top:15px;font-style:italic;background:#fff3cd;padding:10px;border-radius:6px}.decoded-output{background:#fff;padding:20px;border-radius:8px;min-height:50px;font-weight:700;font-size:18px;border:2px solid #e0e0e0;color:#333}.settings-grid{display:grid;grid-template-columns:1fr;gap:20px}.setting-item{display:flex;flex-direction:column;gap:8px}.setting-item label{font-weight:600;color:#555;font-size:15px}.setting-item input[type=range]{width:100%}.setting-value{font-size:14px;color:#667eea;font-weight:700;text-align:right}.setting-row{display:grid;grid-template-columns:auto 1fr auto auto auto;gap:10px;align-items:center}.spacer{width:100%}.setting-row .toggle-switch{justify-self:end}.setting-row input[type=number],.setting-row input[type=text]{width:80px;text-align:center;justify-self:end}.setting-row input[type=number]#globalFrequency{width:80px}#globalFrequency::-webkit-outer-spin-button,#globalFrequency::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}#globalFrequency{-moz-appearance:textfield}.setting-row>div:last-child{justify-self:end}.input-suffix{display:inline-block;width:20px;text-align:left;justify-self:start}.setting-row input[type=range]{justify-self:end;max-width:300px}#timingInfo{background:#e3f2fd;padding:20px;border-radius:8px;font-size:14px;line-height:1.8;border:2px solid #90caf9;margin-top:15px}.squeeze-indicator{text-align:center;margin-top:15px;font-size:16px;font-weight:700;color:#ff6b00;opacity:0;transition:opacity .2s;background:#fff3cd;padding:10px;border-radius:6px}.squeeze-indicator.active{opacity:1}.toggle-switch{position:relative;display:inline-block;width:60px;height:30px}.toggle-input{opacity:0;width:0;height:0;position:absolute}.toggle-label{position:absolute;cursor:pointer;inset:0;background:linear-gradient(135deg,#e0e0e0,#f5f5f5);border:2px solid #ddd;border-radius:30px;transition:all .3s ease;box-shadow:inset 0 2px 4px #0000001a,0 2px 8px #0000001a}.toggle-label:hover{border-color:#667eea;box-shadow:inset 0 2px 4px #0000001a,0 2px 12px #667eea33}.toggle-switch-handle{position:absolute;content:"";height:22px;width:22px;left:2px;top:2px;background:linear-gradient(135deg,#fff,#f8f8f8);border-radius:50%;transition:all .3s ease;box-shadow:0 2px 6px #0003,0 1px 3px #0000001a}.toggle-input:checked+.toggle-label{background:linear-gradient(135deg,#667eea,#764ba2);border-color:#667eea;box-shadow:inset 0 2px 4px #0000001a,0 2px 12px #667eea66}.toggle-input:checked+.toggle-label .toggle-switch-handle{transform:translate(30px);background:linear-gradient(135deg,#fff,#f0f8ff);box-shadow:0 2px 8px #0000004d,0 1px 4px #0003}.toggle-input:focus+.toggle-label{outline:2px solid #667eea;outline-offset:2px}.toggle-label:active .toggle-switch-handle{width:26px}.toggle-input:checked+.toggle-label:active .toggle-switch-handle{transform:translate(26px)}</style>
</head>
<body>
    <div class="settings-icon" id="settingsIcon">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
        </svg>
    </div>

    <div class="settings-modal" id="settingsModal">
        <div class="settings-content">
            <div class="settings-grid">
                <div class="setting-item">
                    <div class="setting-row">
                        <label>音量</label>
                        <span class="spacer"></span>
                        <input type="range" id="volumeRange" min="0" max="100" value="30" style="width: 50%;">
                        <input type="number" id="volumeInput" min="0" max="100" value="30">
                        <span class="input-suffix">%</span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>周波数 (Hz)</label>
                        <span class="spacer"></span>
                        <span class="spacer"></span>
                        <input type="number" id="globalFrequency" min="100" max="2000" value="600" step="50">
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>WPM (速度: 1-999)</label>
                        <span class="spacer"></span>
                        <span class="spacer"></span>
                        <input type="number" id="globalWPM" min="1" max="999" value="20">
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>縦振りキー</label>
                        <span class="spacer"></span>
                        <span class="spacer"></span>
                        <input type="text" id="straightKey" value="Space">
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>横振り左キー</label>
                        <span class="spacer"></span>
                        <span class="spacer"></span>
                        <input type="text" id="paddleLeftKey" value="j">
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>横振り右キー</label>
                        <span class="spacer"></span>
                        <span class="spacer"></span>
                        <input type="text" id="paddleRightKey" value="k">
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>Iambic A/B モード <span id="iambicModeStatus">(現在: Iambic B)</span></label>
                        <span class="spacer"></span>
                        <div class="toggle-switch">
                            <input type="checkbox" id="iambicMode" class="toggle-input">
                            <label for="iambicMode" class="toggle-label">
                                <span class="toggle-switch-handle"></span>
                            </label>
                        </div>
                        <span class="spacer"></span>
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>横振りパドル配置 <span id="paddleLayoutStatus">(現在: 左:短点 / 右:長点)</span></label>
                        <span class="spacer"></span>
                        <div class="toggle-switch">
                            <input type="checkbox" id="paddleLayout" class="toggle-input">
                            <label for="paddleLayout" class="toggle-label">
                                <span class="toggle-switch-handle"></span>
                            </label>
                        </div>
                        <span class="spacer"></span>
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>和文モード <span id="japaneseModeStatus">(現在: 欧文)</span></label>
                        <span class="spacer"></span>
                        <div class="toggle-switch">
                            <input type="checkbox" id="japaneseMode" class="toggle-input">
                            <label for="japaneseMode" class="toggle-label">
                                <span class="toggle-switch-handle"></span>
                            </label>
                        </div>
                        <span class="spacer"></span>
                        <span class="input-suffix"></span>
                    </div>
                </div>
            </div>
            <div style="display: flex; justify-content: center; gap: 15px; margin-top: 25px;">
                <button id="settingsCancel" style="min-width: 120px; background: linear-gradient(135deg, #888 0%, #666 100%);">Cancel</button>
                <button id="settingsOK" style="min-width: 120px;">OK</button>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="header">
            <h1>モールス体験</h1>
        </div>
        
        <div class="tabs">
            <button class="tab active" data-tab="straight">縦振り</button>
            <button class="tab" data-tab="paddle">横振り</button>
            <button class="tab" data-tab="text">文字列変換</button>
        </div>

        <div class="tab-content active" id="straight-content">
            <div class="section">
                <h2>縦振り電鍵</h2>
                <button class="morse-key" id="morseKey">KEY</button>
                <div class="keyboard-hint">
                    キーボード: <span id="straightKeyHint">Space</span>
                </div>
                <div class="morse-display" id="straightMorseDisplay">入力されたモールス信号</div>
                <div class="decoded-output" id="straightDecoded">解読された文字</div>
                <div style="text-align: center; margin-top: 20px;">
                    <button id="straightClear">クリア</button>
                </div>
            </div>
        </div>

        <div class="tab-content" id="paddle-content">
            <div class="section">
                <h2>横振り電鍵</h2>
                <div class="paddle-container">
                    <button class="paddle-key paddle-left" id="paddleLeft">
                        短点<br>・
                    </button>
                    <button class="paddle-key paddle-right" id="paddleRight">
                        長点<br>ー
                    </button>
                </div>
                <div class="keyboard-hint">
                    キーボード: <span id="paddleKeysHint">J / K</span>
                </div>
                <div class="squeeze-indicator" id="squeezeIndicator">
                    ⚡squeeze⚡
                </div>
                <div class="morse-display" id="paddleMorseDisplay">入力されたモールス信号</div>
                <div class="decoded-output" id="paddleDecoded">解読された文字</div>
                <div style="text-align: center; margin-top: 20px;">
                    <button id="paddleClear">クリア</button>
                </div>
            </div>
        </div>

        <div class="tab-content" id="text-content">
            <div class="section">
                <h2>文字列 → モールス信号</h2>
                <input type="text" id="textInput" placeholder="変換したいテキストを入力">
                <div class="morse-display" id="morseOutput">モールス信号が表示されます</div>
                <div class="controls">
                    <button id="playButton">再生</button>
                    <button id="stopButton" disabled>停止</button>
                    <button id="clearTextButton">クリア</button>
                </div>
            </div>
                <div class="section" id="textLogSection">
                    <h2>受理ログ</h2>
                    <ul id="textLog"></ul>
                    <button id="clearTextLog">ログクリア</button>
                </div>
        </div>
    </div>

    <!-- TypeScript モジュール -->
</body>
</html>