<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>モールス体験</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="settings-icon" id="settingsIcon">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
        </svg>
    </div>

    <div class="settings-modal" id="settingsModal">
        <div class="settings-content">
            <div class="settings-grid">
                <div class="setting-item">
                    <div class="setting-row">
                        <label>音量</label>
                        <span class="spacer"></span>
                        <input type="range" id="volumeRange" min="0" max="100" value="30" style="width: 50%;">
                        <input type="number" id="volumeInput" min="0" max="100" value="30">
                        <span class="input-suffix">%</span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>周波数 (Hz)</label>
                        <span class="spacer"></span>
                        <span class="spacer"></span>
                        <input type="number" id="globalFrequency" min="100" max="2000" value="600" step="50">
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>WPM (速度: 1-999)</label>
                        <span class="spacer"></span>
                        <span class="spacer"></span>
                        <input type="number" id="globalWPM" min="1" max="999" value="20">
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>縦振りキー</label>
                        <span class="spacer"></span>
                        <span class="spacer"></span>
                        <input type="text" id="straightKey" value="Space">
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>横振り左キー</label>
                        <span class="spacer"></span>
                        <span class="spacer"></span>
                        <input type="text" id="paddleLeftKey" value="j">
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>横振り右キー</label>
                        <span class="spacer"></span>
                        <span class="spacer"></span>
                        <input type="text" id="paddleRightKey" value="k">
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>Iambic A/B モード <span id="iambicModeStatus">(現在: Iambic B)</span></label>
                        <span class="spacer"></span>
                        <div class="toggle-switch">
                            <input type="checkbox" id="iambicMode" class="toggle-input">
                            <label for="iambicMode" class="toggle-label">
                                <span class="toggle-switch-handle"></span>
                            </label>
                        </div>
                        <span class="spacer"></span>
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>横振りパドル配置 <span id="paddleLayoutStatus">(現在: 左:短点 / 右:長点)</span></label>
                        <span class="spacer"></span>
                        <div class="toggle-switch">
                            <input type="checkbox" id="paddleLayout" class="toggle-input">
                            <label for="paddleLayout" class="toggle-label">
                                <span class="toggle-switch-handle"></span>
                            </label>
                        </div>
                        <span class="spacer"></span>
                        <span class="input-suffix"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-row">
                        <label>和文モード <span id="japaneseModeStatus">(現在: 欧文)</span></label>
                        <span class="spacer"></span>
                        <div class="toggle-switch">
                            <input type="checkbox" id="japaneseMode" class="toggle-input">
                            <label for="japaneseMode" class="toggle-label">
                                <span class="toggle-switch-handle"></span>
                            </label>
                        </div>
                        <span class="spacer"></span>
                        <span class="input-suffix"></span>
                    </div>
                </div>
            </div>
            <div style="display: flex; justify-content: center; gap: 15px; margin-top: 25px;">
                <button id="settingsCancel" style="min-width: 120px; background: linear-gradient(135deg, #888 0%, #666 100%);">Cancel</button>
                <button id="settingsOK" style="min-width: 120px;">OK</button>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="header">
            <h1>モールス体験</h1>
        </div>
        
        <div class="tabs">
            <button class="tab active" data-tab="straight">縦振り</button>
            <button class="tab" data-tab="paddle">横振り</button>
            <button class="tab" data-tab="text">文字列変換</button>
        </div>

        <div class="tab-content active" id="straight-content">
            <div class="section">
                <h2>縦振り電鍵</h2>
                <button class="morse-key" id="morseKey">KEY</button>
                <div class="keyboard-hint">
                    キーボード: <span id="straightKeyHint">Space</span>
                </div>
                <div class="morse-display" id="straightMorseDisplay">入力されたモールス信号</div>
                <div class="decoded-output" id="straightDecoded">解読された文字</div>
                <div style="text-align: center; margin-top: 20px;">
                    <button id="straightClear">クリア</button>
                </div>
            </div>
        </div>

        <div class="tab-content" id="paddle-content">
            <div class="section">
                <h2>横振り電鍵</h2>
                <div class="paddle-container">
                    <button class="paddle-key paddle-left" id="paddleLeft">
                        短点<br>・
                    </button>
                    <button class="paddle-key paddle-right" id="paddleRight">
                        長点<br>ー
                    </button>
                </div>
                <div class="keyboard-hint">
                    キーボード: <span id="paddleKeysHint">J / K</span>
                </div>
                <div class="squeeze-indicator" id="squeezeIndicator">
                    ⚡squeeze⚡
                </div>
                <div class="morse-display" id="paddleMorseDisplay">入力されたモールス信号</div>
                <div class="decoded-output" id="paddleDecoded">解読された文字</div>
                <div style="text-align: center; margin-top: 20px;">
                    <button id="paddleClear">クリア</button>
                </div>
            </div>
        </div>

        <div class="tab-content" id="text-content">
            <div class="section">
                <h2>文字列 → モールス信号</h2>
                <input type="text" id="textInput" placeholder="変換したいテキストを入力">
                <div class="morse-display" id="morseOutput">モールス信号が表示されます</div>
                <div class="controls">
                    <button id="playButton">再生</button>
                    <button id="stopButton" disabled>停止</button>
                    <button id="clearTextButton">クリア</button>
                </div>
            </div>
                <div class="section" id="textLogSection">
                    <h2>受理ログ</h2>
                    <ul id="textLog"></ul>
                    <button id="clearTextLog">ログクリア</button>
                </div>
        </div>
    </div>

    <!-- TypeScript モジュール -->
    <script type="module" src="/src/main.ts"></script>
</body>
</html>