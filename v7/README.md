# モールス練習アプリ v7 - モールス信号聞き取り練習版

v6の機能を拡張し、実践的なモールス信号聞き取り練習機能を追加したバージョンです。

## 🎯 v7の新機能

### モールス信号聞き取り練習モード

アマチュア無線の実際の交信や英文を聞き取る練習ができる新しいモードです。

#### 主な特徴

1. **時間制限なし**
   - 紙にメモを取りながら聞き取り、後から入力することも可能
   - 自分のペースで練習できる

2. **豊富な定型文カテゴリー**
   - **ラバースタンプQSO**: アマチュア無線の定型的な交信文
   - **英文100字**: 短めの英文練習
   - **英文200字**: 中程度の英文練習
   - **英文300字**: 長めの英文練習
   - **ユーザー定義**: 自分で作成した定型文

3. **ラバースタンプQSOとは**

   アマチュア無線のCW（モールス信号）交信で用いられる定型的なテンプレートです。

   - CWの特性を活かした短縮形や略語を多用
   - RST（信号強度）、QTH（住所）、Name（名前）、WX（天気）、Rig（無線機）、ANT（アンテナ）などの基本情報を交換
   - 実際の交信の流れを学べる

   **主な略語例**:
   - TNX/TKS = Thanks
   - VY = Very
   - FB = Fine Business（すばらしい）
   - 73 = Best regards（別れの挨拶）
   - UR = Your
   - MI = My
   - DE = This is
   - AR = End of message
   - BT = Paragraph break

4. **ユーザー定義定型文機能**
   - 自分の練習したい文章を登録
   - タイトルと内容を自由に設定
   - ローカルストレージに保存（ブラウザ内で永続化）
   - 編集・削除機能

#### 練習の流れ

1. カテゴリーから定型文を選択
2. 再生ボタンでモールス信号を聞く
3. 聞き取った内容を入力欄に入力
4. 採点ボタンで正答率を確認
5. 結果を見て復習

## 📁 ディレクトリ構造

```
v7/src/
├── index.html          # 単一エントリーポイント
├── main.ts             # アプリケーション起動ファイル
├── core/               # 共有モジュール
│   ├── router.ts       # ルーティングシステム
│   ├── audio-system.ts # 音声システム
│   ├── morse-code.ts   # モールス符号変換
│   └── settings.ts     # 設定管理
├── modes/              # 各モード
│   ├── menu/           # メニュー画面
│   ├── vertical/       # 縦振り電鍵練習
│   ├── horizontal/     # 横振り電鍵練習
│   ├── flashcard/      # CW略語・Q符号学習
│   ├── koch/           # コッホ法トレーニング（マルチモード）
│   └── listening/      # モールス信号聞き取り練習 NEW!
│       ├── main.ts           # メインコントローラー
│       ├── templates.ts      # 定型文データ管理
│       └── style.css         # スタイル
├── components/         # 再利用可能なコンポーネント
└── styles/             # グローバルスタイル
    └── global.css
```

## 🚀 開発とビルド

### 開発サーバーの起動
```bash
cd v7/src
npm install
npm run dev
```

ブラウザで http://localhost:3000 を開きます。

### プロダクションビルド
```bash
cd v7/src
npm run build
```

ビルドされたファイルは `v7/dist/index.html` に出力されます。

### プレビュー
```bash
cd v7/src
npm run preview
```

## 🎓 5つの練習モード

### 1. 縦振り電鍵練習 (#vertical)
縦振り電鍵（ストレートキー）の操作を練習します。

### 2. 横振り電鍵練習 (#horizontal)
横振り電鍵（パドル）の操作を練習します。
- Iambic A/Bモード対応
- パドルレイアウト切り替え可能

### 3. CW略語・Q符号学習 (#flashcard)
無線通信で使用する略語とQ符号を学習します。
- フラッシュカードモード
- 試験モード

### 4. コッホ法トレーニング (#koch)
系統的にモールス符号を学習します。
- **基本学習モード**: 40文字を段階的に習得
- **試験モード**: 学習済み文字のテスト
- **任意文字列練習モード**: カスタマイズ可能な練習

### 5. モールス信号聞き取り練習 (#listening) ⭐NEW!
実践的な文章のモールス信号を聞き取る練習をします。
- **ラバースタンプQSO**: アマチュア無線の定型交信
- **英文練習**: 100字/200字/300字の英文
- **ユーザー定義**: 自分で作成した練習文

## 🔄 v6からの主な変更点

### 新規追加機能
- **モールス信号聞き取り練習モード**: 定型文を使った実践的な聞き取り練習
- **ラバースタンプQSOサンプル**: 実際のアマチュア無線交信の流れを学習
- **英文練習**: 100字、200字、300字の英文サンプル
- **ユーザー定義定型文**: 自分で練習文を作成・管理

### UI/UX改善
- カテゴリー別の定型文管理
- 時間制限なしの柔軟な練習スタイル
- ユーザー定義定型文の編集・削除機能

## 📝 技術スタック

- **TypeScript**: 型安全性とコード品質の向上
- **Vite**: 高速なビルドツール
- **vite-plugin-singlefile**: 単一HTMLファイル生成
- **Web Audio API**: 音声生成
- **LocalStorage API**: ユーザー定義定型文の永続化

## 🔧 設定可能な項目

- 音量（0-100%）
- 周波数（100-2000Hz）
- 文字速度（Character Speed WPM）
- 実効速度（Effective Speed WPM）
- 練習時間（秒）
- グループサイズ（文字）
- Iambic A/Bモード（横振り電鍵）
- パドルレイアウト（normal/reversed）

## 📱 対応環境

- モダンブラウザ（Chrome, Firefox, Safari, Edge）
- デスクトップとモバイル対応
- Web Audio API対応必須
- LocalStorage対応必須（ユーザー定義定型文機能）

## 🐛 既知の問題

- 一部のブラウザでは初回音声再生時にユーザージェスチャーが必要
- iOS Safariでは音声の自動再生に制限あり

## 📄 ライセンス

ISC

## 👤 Author

モールス練習アプリ v7 - モールス信号聞き取り練習版
